"use strict";angular.module("sisgene",["ngCookies","ngResource","ngSanitize","ui.router","ui.bootstrap","ngAuth","AngularPrint","angularUtils.directives.dirPagination","angularSpinner"]).config(["$stateProvider","$urlRouterProvider","$locationProvider","$roleProvider","$authProvider","usSpinnerConfigProvider",function(a,b,c,d,e,f){b.otherwise("/"),e.setLoginEndpoint("/sisgene/api/auth/session"),d.setStates({redirectState:"configuracion",loginState:"inicio"}),f.setTheme("bigRed",{color:"red",radius:30,width:8,length:16,shadow:!0})}]).run(["$rootScope","$authVerifier","$role","$state",function(a,b,c,d){a.$on("$stateChangeStart",function(e,f,g){b.verifyStateChangeStart(e,f,g)["catch"](function(b){d.go(c.loginState()),a.$broadcast("notloggedin")})})}]),angular.module("sisgene").controller("AccesosCtrl",["$scope","Roles","Accesos",function(a,b,c){b.listar().then(function(b){a.roles=b,a.rol=a.roles[0]})["catch"](function(b){a.alert=b}),a.tabla={accesos:[]},c.listar().then(function(b){a.tabla.accesos=b}),a.seleccion={func:[],asig:[]},a.seleccionarRol=function(b){a.rol=b,a.seleccion.asig=[],a.seleccion.func=[]},a.filtrar=function(b){var c=a.rol?a.rol.accesos.map(function(a){return a.id}):[];return b.filter(function(a){return-1==c.indexOf(a.id)})},a.seleccionar=function(a,b){var c=b.indexOf(a);-1==c?b.push(a):b.splice(c,1)},a.isSelected=function(a,b){return-1!=b.indexOf(a)},a.agregar=function(){angular.forEach(a.seleccion.func,function(b){var c=a.rol.accesos.filter(function(a){return a.id==b.id});0==c.length&&a.rol.accesos.push(b)}),a.seleccion.func=[]},a.agregarTodo=function(){angular.forEach(a.tabla.accesos,function(b){var c=a.rol.accesos.filter(function(a){return a.id==b.id});0==c.length&&a.rol.accesos.push(b)})},a.quitar=function(){angular.forEach(a.seleccion.asig,function(b){a.rol.accesos.splice(a.rol.accesos.indexOf(b),1)}),a.seleccion.asig=[]},a.quitarTodo=function(){a.rol.accesos=[]},a.guardar=function(){b.actualizar(a.rol.id,a.rol).then(function(){return b.listar()}).then(function(b){a.roles=b,a.rol=a.roles.filter(function(b){return b.id==a.rol.id})[0],a.alert={show:!0,type:"success",message:"se actualizaron los accesos"}})["catch"](function(b){a.alert=b})}}]),angular.module("sisgene").config(["$stateProvider",function(a){a.state("configuracion.accesos",{url:"/accesos",templateUrl:"app/configuracion/accesos/accesos.html",controller:"AccesosCtrl",access:{requiredRoles:["ADMINISTRADOR"]}})}]),angular.module("sisgene").controller("ConfiguracionCtrl",["$scope","$state",function(a,b){}]),angular.module("sisgene").config(["$stateProvider",function(a){a.state("configuracion",{url:"/configuracion",templateUrl:"app/configuracion/configuracion.html",controller:"ConfiguracionCtrl",access:{requiredRoles:["ADMINISTRADOR","CAPACITADOR"]}})}]),angular.module("sisgene").controller("CuestionarioCtrl",["$scope","$stateParams","$state","Encuestas",function(a,b,c,d){a.encuestaId=b.encuestaId,d.listar().then(function(b){a.encuestas=b})["catch"](function(b){a.alert=b}),a.ir=function(a){a.state?c.go(a.state):a.action()},a.isActive=function(a){var b;return b="configuracion.cuestionario"===a?!1:-1!=c.current.name.indexOf(a)},a.elegirEncuesta=function(a){c.go("configuracion.cuestionarioEncuesta.definir",{encuestaId:a})}}]),angular.module("sisgene").config(["$stateProvider",function(a){a.state("configuracion.cuestionario",{url:"/cuestionario",templateUrl:"app/configuracion/cuestionario/cuestionario.html",controller:"CuestionarioCtrl",access:{requiredRoles:["ADMINISTRADOR"]}}).state("configuracion.cuestionarioEncuesta",{url:"/cuestionario/:encuestaId",templateUrl:"app/configuracion/cuestionario/cuestionario.html",controller:"CuestionarioCtrl",access:{requiredRoles:["ADMINISTRADOR"]}})}]),angular.module("sisgene").controller("AgregarPreguntaCtrl",["$scope","$modalInstance","Cuestionarios","data",function(a,b,c,d){function e(a){return Math.floor(a)===a?0:a.toString().split(".")[1].length||0}var f=1,g=2,h=4,i=5,j=3,k=6;a.form={tipos:d.tipos,subseccion:!1,subsecciones:[],mostrarEjecutar:!1,multipersona:!1,esPreguntaAbierta:!1,abiertaSubtipos:["numerico","alfanumerico","cadena"],numericoTipos:["entero","decimal"],secciones:d.secciones.map(function(a){return a.muestra=a.seccion+"-"+a.descripcion,a}),lista:{show:!1,headers:[{label:"#","class":"col-xs-1"},{label:"opciones","class":"col-xs-4"},{label:"valor","class":"col-xs-2"},{label:"","class":"col-xs-1"}],filas:[],agregarFila:function(){this.filas.push({opcion:"",valor:0})}},matriz:{show:!1,filas:[],columnas:[],opcion:{},agregarFila:function(b){this.filas.push({opcion:b}),a.pregunta.tipo.filas=this.filas},agregarColumna:function(b,c){return null==c||0>c?a.alertMatriz={show:!0,type:"danger",message:"agrega un valor válido"}:(this.columnas.push({opcion:b,valor:c}),a.pregunta.tipo.columnas=this.columnas,void(this.opcion={}))}}},a.alert={show:!1},a.elegirSeccion=function(b){a.pregunta.seccion=b.seccion;var c=a.form.secciones.filter(function(a){return a.seccion==b.seccion});a.habilitarSubseccion=c[0].subsecciones?c[0].subsecciones.length>0:!1,a.habilitarSubseccion&&(a.form.subsecciones=c[0].subsecciones.map(function(a){return a.muestra=a.subseccion+"-"+a.descripcion,a}))},a.elegirSubseccion=function(b){a.pregunta.subseccion=b.subseccion},a.verificarSubseccion=function(b){b||delete a.pregunta.subseccion},a.setTipoRespuesta=function(){a.form.esPreguntaAbierta=!1,a.form.mostrarEjecutar=!0,a.form.multipleOpcion=!1,a.pregunta.tipo.id===f||a.pregunta.tipo.id==g||a.pregunta.tipo.id==k?(a.pregunta.tipo.id==k&&(a.form.multipleOpcion=!0,a.pregunta.numeroRespuestasMaximo=1,a.pregunta.ordenada=!0),a.form.lista.show=!0,"agregar"==d.action?(a.form.lista.filas=[],a.form.lista.agregarFila()):a.form.lista.filas=a.pregunta.tipo.filas||[],a.form.esPreguntaAbierta=!1,a.form.matriz.show=!1):a.pregunta.tipo.id==h||a.pregunta.tipo.id==i?(a.form.esPreguntaAbierta=!1,a.form.lista.show=!1,a.form.matriz.show=!0,"agregar"==d.action?(a.form.matriz.filas=[],a.form.matriz.columnas=[]):(a.form.matriz.filas=a.pregunta.tipo.filas||[],a.form.matriz.columnas=a.pregunta.tipo.columnas||[])):a.pregunta.tipo.id==j&&(a.form.esPreguntaAbierta=!0,"modificar"!=d.action&&(a.pregunta.subtipo=a.form.abiertaSubtipos[0],a.elegirAbiertaSubtipo()),a.form.lista.show=!1,a.form.matriz.show=!1)},a.asignarFilas=function(b,c,d){return c&&null==d||null!=d&&0>d?a.alertFilas={show:!0,type:"danger",message:"las opciones deben tener un valor válido"}:void(a.pregunta.tipo.filas=b)},a.elegirAbiertaSubtipo=function(){"numerico"==a.pregunta.subtipo&&(a.pregunta.tipoNumerico="entero",a.pregunta.desde=0,a.pregunta.hasta=1)},a.ejecutar=function(){if(!a.pregunta.numero||a.pregunta.numero<1||e(a.pregunta.numero)>0)return a.alert={show:!0,type:"danger",message:"el número de pregunta no es válido"};if(!a.pregunta.seccion)return a.alert={show:!0,type:"danger",message:"agrega una sección"};if(!a.pregunta.descripcion)return a.alert={show:!0,type:"danger",message:"agrega una descripción"};if(a.form.subseccion&&!a.pregunta.subseccion)return a.alert={show:!0,type:"danger",message:"escoge una subsección"};if((a.pregunta.tipo.id==f||a.pregunta.tipo.id==g||a.pregunta.tipo.id==k)&&!a.pregunta.tipo.filas)return a.alert={show:!0,type:"danger",message:"agrega opciones"};if((a.pregunta.tipo.id==f||a.pregunta.tipo.id==g||a.pregunta.tipo.id==k)&&a.pregunta.tipo.filas&&a.pregunta.tipo.filas.filter(function(a){return null==a.valor||null!=a.valor&&a.valor<0}).length>0)return a.alert={show:!0,type:"danger",message:"las opciones deben tener un valor válido"};if(!(a.pregunta.tipo.id!=h&&a.pregunta.tipo.id!=i||a.pregunta.tipo.filas&&a.pregunta.tipo.columnas))return a.alert={show:!0,type:"danger",message:"agrega opciones"};if(a.pregunta.tipo.id==k&&a.form.lista.filas.length<a.pregunta.numeroRespuestasMaximo)return a.alert={show:!0,type:"danger",message:"agrega más opciones como mínimo "+a.pregunta.numeroRespuestasMaximo};if(a.pregunta.tipo.id==j&&"numerico"==a.pregunta.subtipo){if(void 0==a.pregunta.desde||void 0==a.pregunta.hasta)return a.alertAbierta={show:!0,type:"danger",message:"escoge un valor para el rango"};if(a.pregunta.desde>=a.pregunta.hasta)return a.alertAbierta={show:!0,type:"danger",message:"el rango es inválido"};if("decimal"==a.pregunta.tipoNumerico&&(e(a.pregunta.desde)>4||e(a.pregunta.hasta)>4))return a.alertAbierta={show:!0,type:"danger",message:"el número máximo de posiciones decimales es 4"};if("entero"==a.pregunta.tipoNumerico&&(e(a.pregunta.desde)>0||e(a.pregunta.hasta)>0))return a.alertAbierta={show:!0,type:"danger",message:"no se permiten posiciones decimales"}}"modificar"==d.action?(a.preguntas=d.preguntas,c.modificarPregunta(d.encuestaId,a.pregunta).then(function(){var c;c=a.pregunta.numeroAnterior!=a.pregunta.numero?a.pregunta.numeroAnterior:a.pregunta.numero,a.preguntas=a.preguntas.map(function(b){return b.numero==c&&(b=a.pregunta),b});var d={show:!0,message:"se modificó la pregunta "+a.pregunta.numero,type:"success"};b.close({preguntas:a.preguntas,alert:d})})["catch"](function(b){a.alert=b})):c.agregarPregunta(d.encuestaId,a.pregunta).then(function(){d.preguntas.push(a.pregunta);var c={show:!0,type:"success",message:"se agregó la pregunta "+a.pregunta.numero};b.close({preguntas:d.preguntas,alert:c})})["catch"](function(b){a.alert=b})},a.asignarMultipersona=function(b){a.pregunta.multipersona=b},a.salir=function(){b.dismiss()},function(){a.btnActionLabel=d.action.charAt(0).toUpperCase()+d.action.slice(1),"modificar"==d.action?(a.pregunta=d.pregunta,a.pregunta.numeroAnterior=d.pregunta.numero,a.seccionSeleccionada=d.secciones.filter(function(b){return b.seccion==a.pregunta.seccion}).map(function(a){return a.muestra=a.seccion+"-"+a.descripcion,a})[0],a.form.subseccion=a.pregunta.subseccion?!0:!1,a.habilitarSubseccion=a.seccionSeleccionada.subsecciones&&a.seccionSeleccionada.subsecciones.length>0,a.habilitarSubseccion&&(a.subseccionSeleccionada=a.seccionSeleccionada.subsecciones.filter(function(b){return b.subseccion==a.pregunta.subseccion}).map(function(a){return a.muestra=a.subseccion+"-"+a.descripcion,a})[0],a.form.subsecciones=a.seccionSeleccionada.subsecciones.map(function(a){return a.muestra=a.subseccion+"-"+a.descripcion,a})),a.form.multipersona=a.pregunta.multipersona?!0:!1,a.setTipoRespuesta()):a.pregunta={multipersona:!1}}()}]),angular.module("sisgene").controller("DefinirCuestionarioCtrl",["$scope","$stateParams","$state","$modal","$window","$timeout","Modal","Encuestas","Cuestionarios","Preguntas",function(a,b,c,d,e,f,g,h,i,j){a.encuestaId=b.encuestaId,a.alert={show:!1},h.mostrar(a.encuestaId).then(function(b){a.encuesta=b})["catch"](function(b){a.alert=b}),a.tabla={headers:[{title:"#","class":"col-sm-1"},{title:"Sección","class":"col-sm-1"},{title:"Subsección","class":"col-sm-1"},{title:"Descripción","class":"col-sm-6"},{title:"Tipo Respuesta","class":"col-sm-2"},{title:"Multipersona","class":"col-sm-2"}],paginacion:{actual:1,numero:10}},j.listarTipos().then(function(b){a.tipos=b}),i.listar(a.encuestaId).then(function(b){if(a.encuesta.preguntas=b.preguntas||[],a.encuesta.secciones=b.secciones,a.primeraVez=a.encuesta.secciones?0==a.encuesta.secciones.length:!0,!a.primeraVez){var c=-1;a.secciones=[];for(var d=0;d<a.encuesta.secciones.length;d++)a.encuesta.secciones[d].subsecciones&&a.encuesta.secciones[d].subsecciones.length>c&&(c=a.encuesta.secciones[d].subsecciones.length),a.secciones.push(d+1);for(a.subsecciones=[],d=0;c>d;d++)a.subsecciones.push(d+1)}}),a.editarSeccion=function(){var b=d.open({animation:!0,templateUrl:"app/configuracion/cuestionario/definir/seccion/seccion.html",controller:"EditarSeccionCtrl",size:"lg",backdrop:"static",keyboard:!1,resolve:{data:function(){return{secciones:angular.copy(a.encuesta.secciones),encuestaId:a.encuestaId}}}});b.result.then(function(b){a.encuesta.secciones=b,a.primeraVez=a.encuesta.secciones?0==a.encuesta.secciones.length:!0;var c=-1;a.secciones=[];for(var d=0;d<b.length;d++)b[d].subsecciones&&b[d].subsecciones.length>c&&(c=b[d].subsecciones.length),a.secciones.push(d+1);for(a.subsecciones=[],d=0;c>d;d++)a.subsecciones.push(d+1);a.alert={show:!0,type:"success",message:"se editó sección y subsección"}})},a.agregar=function(){var b=d.open({animation:!0,templateUrl:"app/configuracion/cuestionario/definir/agregar/agregar.html",controller:"AgregarPreguntaCtrl",size:"lg",backdrop:"static",keyboard:!1,resolve:{data:function(){return{action:"agregar",tipos:a.tipos,preguntas:angular.copy(a.encuesta.preguntas),numero:a.encuesta.preguntas.length+1,secciones:a.encuesta.secciones,encuestaId:a.encuestaId}}}});b.result.then(function(b){a.encuesta.preguntas=b.preguntas,a.alert=b.alert})},a.modificar=function(b){var c=d.open({animation:!0,templateUrl:"app/configuracion/cuestionario/definir/agregar/agregar.html",controller:"AgregarPreguntaCtrl",size:"lg",backdrop:"static",keyboard:!1,resolve:{data:function(){return{action:"modificar",pregunta:angular.copy(b),preguntas:angular.copy(a.encuesta.preguntas),tipos:a.tipos,secciones:a.encuesta.secciones,encuestaId:a.encuestaId}}}});c.result.then(function(b){a.encuesta.preguntas=b.preguntas,a.alert=b.alert})},a.imprimir=function(){var b=d.open({animation:!0,templateUrl:"app/configuracion/cuestionario/definir/imprimir/imprimir.html",controller:"ImprimirCuestionarioCtrl",size:"lg",backdrop:"static",keyboard:!1,resolve:{data:function(){return{encuesta:a.encuesta}}}});b.result.then(function(b){a.secciones=b,a.imprimirCuestionario=!0,f(function(){e.print()},500),f(function(){a.imprimirCuestionario=!1,delete a.secciones},500)})},a.eliminar=function(b){g.confirm({ok:function(){i.eliminarPregunta(a.encuestaId,b.numero).then(function(){var c=a.encuesta.preguntas.indexOf(b),d=angular.copy(a.encuesta.preguntas);d.splice(c,1),a.encuesta.preguntas=d,a.alert={show:!0,message:"se eliminó la pregunta "+b.numero,type:"success"}})["catch"](function(b){a.alert=b})},html:"<p>¿Está seguro que desea eliminar la pregunta <strong>"+b.descripcion+"</strong>?</p>",color:"cuanto",title:"eliminar pregunta",btnText:"Continuar"})},a.salir=function(){c.go("configuracion.cuestionario")}}]),angular.module("sisgene").config(["$stateProvider",function(a){a.state("configuracion.cuestionarioEncuesta.definir",{url:"/definir",templateUrl:"app/configuracion/cuestionario/definir/definir.html",controller:"DefinirCuestionarioCtrl",access:{requiredRoles:["ADMINISTRADOR"]}})}]),angular.module("sisgene").controller("ImprimirCuestionarioCtrl",["$scope","$modalInstance","$timeout","$window","data",function(a,b,c,d,e){a.encuesta=e.encuesta;a.salir=function(){b.dismiss()},a.confirmarImprimir=function(){b.close(a.secciones)},a.secciones=a.encuesta.secciones,a.secciones.forEach(function(b){b.preguntas=a.encuesta.preguntas.filter(function(a){return a.seccion==b.seccion&&!a.subseccion}),b.subsecciones&&b.subsecciones.forEach(function(c){c.preguntas=a.encuesta.preguntas.filter(function(a){return a.seccion==b.seccion&&a.subseccion==c.subseccion})})})}]),angular.module("sisgene").controller("EditarSeccionCtrl",["$scope","$modalInstance","$timeout","$location","$anchorScroll","Cuestionarios","data",function(a,b,c,d,e,f,g){a.secciones=g.secciones?g.secciones:[],a.alert={show:!1},a.tabla={headers:[{title:"subseccion","class":"col-sm-2"},{title:"descripcion","class":"col-sm-9"}]},a.agregarSeccion=function(b){return b.descripcion?b.categoria?(a.secciones.push({seccion:a.secciones.length+1,descripcion:b.descripcion,categoria:b.categoria,subsecciones:[]}),delete a.seccion,a.alert={message:"se agregó seccion "+a.secciones.length+" - "+b.descripcion,type:"success",show:!0},void c(function(){a.alert={show:!1},d.hash("footer-secciones"),e()},1e3)):a.alert={message:"ingrese categoría",type:"danger",show:!0}:a.alert={message:"ingrese descripción",type:"danger",show:!0}},a.agregarSubseccion=function(a){a.subsecciones||(a.subsecciones=[]),a.subsecciones.push({subseccion:a.subsecciones.length+1,descripcion:""})},a.eliminarSeccion=function(b){a.secciones.splice(b,1);for(var c=b;c<a.secciones.length;c++)a.secciones[c].seccion=c+1},a.eliminarSubseccion=function(a,b){a.splice(b,1);for(var c=b;c<a.length;c++)a[c].subseccion=c+1},a.salir=function(){b.dismiss()},a.aceptar=function(){var c=angular.copy(a.secciones);f.agregarSecciones(g.encuestaId,c).then(function(){b.close(c),a.secciones=[]})["catch"](function(b){a.alert=b})}}]),angular.module("sisgene").controller("AgregarParamCtrl",["$scope","$modalInstance","$timeout","Encuestas","data",function(a,b,c,d,e){function f(a){return a?Math.floor(a)===a?0:a.toString().split(".")[1].length||0:0}a.encuesta={},a.disableAgregar=!0,a.date={min:new Date,format:"dd-MM-yyyy",options:{formatYear:"yy",startingDay:1},desde:!1,hasta:!1},a.alert={show:!1},function(){a.btnActionLabel=e.action.charAt(0).toUpperCase()+e.action.slice(1),"modificar"==e.action&&(a.encuesta=e.encuesta,a.date.min=e.encuesta.desde)}(),d.listarEstados().then(function(b){a.estados=b.map(function(a){return a.descripcion}),"agregar"==e.action&&(a.encuesta.estado=a.estados[0])}),d.listarEquipos().then(function(b){a.equipos=b.map(function(a){return a.descripcion})}),a.abrirDate=function(b){"desde"==b&&c(function(){a.date.desde=!0}),"hasta"==b&&c(function(){a.date.hasta=!0})},a.salir=function(){b.dismiss()},a.verificarNumeroEncuestas=function(b){a.alert.show=!1,0>=b||f(b)>0?(a.disableAgregar=!0,a.alert={show:!0,type:"danger",message:"número no de encuestas no válido"}):a.disableAgregar=!1},a.ejecutar=function(c){return a.form.$valid?!c.numero||c.numero<=0||f(c.numero)>0?a.alert={show:!0,type:danger,message:"error en número de encuestas"}:void("agregar"==e.action?d.agregar(c).then(function(){b.close(c)})["catch"](function(b){a.alert=b}):d.actualizar(c.id,c).then(function(){b.close(c)})["catch"](function(b){a.alert=b})):a.alert={show:!0,type:"danger",message:"error en completar el formulario"}}}]),angular.module("sisgene").controller("ParametrosCtrl",["$scope","$modal","Modal","Encuestas",function(a,b,c,d){a.tabla={headers:[{title:"Código","class":"col-sm-1"},{title:"Descripción","class":"col-sm-5"},{title:"Encuestas por Usuario","class":"col-sm-2"},{title:"Desde","class":"col-sm-1"},{title:"Hasta","class":"col-sm-1"},{title:"Estado","class":"col-sm-1"}],paginacion:{actual:1,numero:10}},d.listar("todo").then(function(b){a.encuestas=b}),a.agregar=function(){var c=b.open({animation:!0,templateUrl:"app/configuracion/parametros/agregar/agregar.html",controller:"AgregarParamCtrl",size:"lg",backdrop:"static",keyboard:!1,resolve:{data:function(){return{action:"agregar"}}}});c.result.then(function(b){d.listar("todo").then(function(c){a.encuestas=c,a.alert={show:!0,message:"se agregó encuesta "+b.codigo,type:"success"}})})},a.modificar=function(c){var d=b.open({animation:!0,templateUrl:"app/configuracion/parametros/agregar/agregar.html",controller:"AgregarParamCtrl",size:"lg",backdrop:"static",keyboard:!1,resolve:{data:function(){return{action:"modificar",encuesta:angular.copy(c)}}}});d.result.then(function(b){a.encuestas=a.encuestas.map(function(a){return a.id==b.id&&(a=b),a}),a.alert={show:!0,message:"se actualizó la encuesta "+b.codigo,type:"success"}})},a.eliminar=function(b){c.confirm({ok:function(){d.eliminar(b.id).then(function(){var c=angular.copy(a.encuestas);c.splice(a.encuestas.indexOf(b),1),a.encuestas=c,a.alert={show:!0,message:"se eliminó la encuesta "+b.codigo,type:"success"}})["catch"](function(b){a.alert=b})},html:"<p>¿Está seguro que desea eliminar la encuesta <strong>"+b.codigo+"</strong>?</p>",color:"cuanto",title:"eliminar encuesta",btnText:"Continuar"})}}]),angular.module("sisgene").config(["$stateProvider",function(a){a.state("configuracion.parametros",{url:"/parametros",templateUrl:"app/configuracion/parametros/parametros.html",controller:"ParametrosCtrl",access:{requiredRoles:["ADMINISTRADOR"]}})}]),angular.module("sisgene").controller("ModificarRolCtrl",["$scope","$modalInstance","rol",function(a,b,c){a.rol=c,a.modificar=function(a){b.close(a)},a.salir=function(){b.dismiss()}}]),angular.module("sisgene").controller("RolesCtrl",["$scope","$modal","Roles","Modal",function(a,b,c,d){a.tabla={headers:[{title:"Codigo","class":"col-sm-2"},{title:"Descripcion de Rol","class":"col-sm-9"}]},c.listar().then(function(b){a.roles=b})["catch"](function(b){a.alert=b}),a.agregar=function(b){return a.rolForm.$valid?void c.agregar(b).then(function(){return c.listar()}).then(function(c){a.roles=c,a.alert={show:!0,message:"se agregó el rol "+b.descripcion,type:"success"}})["catch"](function(b){a.alert=b}):a.alert={show:!0,message:"el código superó el número máximo de caracteres (3)",type:"danger"}},a.modificar=function(d){var e=b.open({animation:!0,templateUrl:"app/configuracion/roles/modificar/modificar.html",controller:"ModificarRolCtrl",size:"md",backdrop:"static",keyboard:!1,resolve:{rol:function(){return angular.copy(d)}}});e.result.then(function(b){delete b.accesos,c.actualizar(b.id,b).then(function(){return c.listar()}).then(function(c){a.roles=c,a.alert={show:!0,message:"se actualizó el rol "+b.descripcion,type:"success"}})["catch"](function(b){a.alert=b})})},a.eliminar=function(b){d.confirm({ok:function(){c.eliminar(b.id).then(function(){var c=a.roles.indexOf(b);a.roles.splice(c,1),a.alert={show:!0,message:"se eliminó el rol "+b.descripcion,type:"success"}})["catch"](function(b){a.alert=b})},html:"<p>¿Está seguro que desea eliminar el rol <strong>"+b.descripcion+"</strong>?</p>",color:"cuanto",title:"eliminar rol",btnText:"Continuar"})},a.esProtegido=function(a){return"ADMINISTRADOR"==a.descripcion||"SUPERVISOR"==a.descripcion||"ENCUESTADOR"==a.descripcion}}]),angular.module("sisgene").config(["$stateProvider",function(a){a.state("configuracion.roles",{url:"/roles",templateUrl:"app/configuracion/roles/roles.html",controller:"RolesCtrl",access:{requiredRoles:["ADMINISTRADOR"]}})}]),angular.module("sisgene").controller("AgregarUsuarioCtrl",["$scope","$modalInstance","Roles","Zonificacion","Usuarios","data",function(a,b,c,d,e,f){a.form={usuario:{tipos:[]},equipos:["Tablet","iPad","Laptop"],zonificacion:{departamentos:[],provincias:[],distritos:[]}},a.alert={show:!1},a.visualizar=!1,a.modificar="modificar"==f.action,d.listarDepartamentos().then(function(b){a.form.zonificacion.departamentos=b.map(function(a){return a.descripcion})}),c.listar().then(function(b){a.form.usuario.tipos=b.map(function(a){return a.descripcion})}),function(){a.btnActionLabel=f.action.charAt(0).toUpperCase()+f.action.slice(1),"modificar"==f.action?(a.usuario=f.usuario,"ENCUESTADOR"!=a.usuario.tipo&&(a.usuario.encuestas={}),a.disabled=!0):a.usuario={encuestas:{}}}(),a.salir=function(){b.dismiss()},a.ejecutar=function(c,d){if(!c.$valid)return a.alert={show:!0,type:"danger",message:"error en completar el formulario"};var g;g="agregar"==f.action?e.agregar(f.encuestaId,d):e.modificar(f.encuestaId,d),g.then(function(){b.close(d)})["catch"](function(b){a.alert=b})},a.asignarPass=function(a){a.clave=a.apellidos.paterno.charAt(0).toLowerCase()+a.apellidos.materno.charAt(0).toLowerCase()+a.nombres.charAt(0).toLowerCase()+a.dni},a.elegirDepartamento=function(b){d.listarProvincias(b).then(function(b){a.form.zonificacion.provincias=b.map(function(a){return a.descripcion}),a.form.zonificacion.distritos=[]})},a.elegirProvincia=function(b,c){d.listarDistritos(b,c).then(function(b){a.form.zonificacion.distritos=b.map(function(a){return a.descripcion})})},a.esAdministrador=function(a){return"ADMINISTRADOR"==a.tipo}}]),angular.module("sisgene").controller("ExcelCtrl",["$scope","$modalInstance","excel",function(a,b,c){a.tabla={headers:[{title:"DNI","class":"col-sm-1"},{title:"Apellidos","class":"col-sm-3"},{title:"Nombres","class":"col-sm-2"},{title:"Tipo Usuario","class":"col-sm-1"},{title:"Grupo","class":"col-sm-1"},{title:"Zonificación","class":"col-sm-1"}]},a.alerts=[],a.fileChanged=function(b){return a.alerts=[],b&&1==b.length?(a.sheets=[],a.excelFile=b[0],void c.readFile(a.excelFile,!0,!0).then(function(b){a.sheets=b.sheets;for(var c in a.sheets)break;var d=a.sheets[c];a.usuarios=[];try{angular.forEach(d,function(b){8!=b.DNI.length?a.alerts.push({show:!0,type:"danger",message:"error en formato de DNI "+b.DNI}):a.usuarios.filter(function(a){return a.dni==a.DNI}).length>0?a.alerts.push({show:!0,type:"danger",message:"DNI repetido "+b.DNI}):a.usuarios.push({dni:b.DNI,apellidos:{paterno:b["APELLIDO PATERNO"],materno:b["APELLIDO MATERNO"]},nombres:b.NOMBRES,tipo:b["TIPO DE USUARIO"].toUpperCase(),grupo:b.GRUPO,zonificacion:{departamento:b.DEPARTAMENTO,provincia:b.PROVINCIA,distrito:b.DISTRITO},clave:b["APELLIDO PATERNO"].charAt(0).toLowerCase()+b["APELLIDO MATERNO"].charAt(0).toLowerCase()+b.NOMBRES.charAt(0).toLowerCase()+b.DNI})})}catch(e){a.alerts.push({show:!0,type:"danger",message:"error en leer excel"})}})):a.alerts.push({type:"danger",message:"error al leer archivo",show:!0})},a.aceptar=function(){b.close(a.usuarios)},a.salir=function(){b.dismiss()}}]),angular.module("sisgene").controller("ResumenUsuariosCtrl",["$scope","$modalInstance","$window","$timeout","Usuarios","data",function(a,b,c,d,e,f){a.usuarios=f.usuarios.map(function(a){return a.nombreCompleto=a.apellidos.paterno+" "+a.apellidos.materno+", "+a.nombres,a}).filter(function(a){return"ENCUESTADOR"==a.tipo}),a.encuesta=f.encuesta,a.tabla={headers:[{title:"Grupo","class":"col-sm-1"},{title:"Supervisor","class":"col-sm-5"},{title:"Nombre Usuario","class":"col-sm-2"},{title:"Encuesta Desde","class":"col-sm-2"},{title:"Encuesta Hasta","class":"col-sm-2"}]},a.salir=function(){b.dismiss()},a.numerar=function(){var b=1;angular.forEach(a.usuarios,function(c){c.encuestas.desde=b,b+=a.encuesta.numero,c.encuestas.hasta=b-1}),a.numeracion=!0},a.guardar=function(){e.agregarNumerar(f.encuestaId,{usuarios:a.usuarios.map(function(a){return{usuario:a.usuario,encuestas:a.encuestas}})}).then(function(){b.close({action:"numerar"})})["catch"](function(b){a.aler=b}),a.numeracion=!1},a.imprimir=function(){b.close({action:"imprimir",usuarios:a.usuarios})}}]),angular.module("sisgene").controller("UsuariosCtrl",["$scope","$stateParams","$state","$modal","Modal","Encuestas","Usuarios","excel","$window","$timeout","$authState",function(a,b,c,d,e,f,g,h,i,j,k){a.encuestaId=b.encuestaId,function(){a.encuestaId&&g.listar(a.encuestaId).then(function(b){a.usuarios=b.map(function(a){return a.nombreCompleto=a.apellidos.paterno+" "+a.apellidos.materno+", "+a.nombres,a})})}(),a.tabla={headers:[{title:"Usuario","class":"col-sm-2"},{title:"DNI","class":"col-sm-1"},{title:"Apellidos","class":"col-sm-3"},{title:"Nombres","class":"col-sm-2"},{title:"Tipo Usuario","class":"col-sm-1"},{title:"Grupo","class":"col-sm-1"},{title:"Encuesta Desde","class":"col-sm-1"},{title:"Encuesta Hasta","class":"col-sm-1"},{title:"Zonificación","class":"col-sm-1"}],paginacion:{actual:1,numero:10},headersResumen:[{title:"Grupo","class":"col-sm-1"},{title:"Supervisor","class":"col-sm-5"},{title:"Nombre Usuario","class":"col-sm-2"},{title:"Encuesta Desde","class":"col-sm-2"},{title:"Encuesta Hasta","class":"col-sm-2"}]},f.listar().then(function(b){a.encuestas=b})["catch"](function(b){a.alert=b}),function(){a.encuestaId&&f.mostrar(a.encuestaId).then(function(b){a.encuesta=b})}(),a.isAdministrador=function(){return k.isAdministrador()},a.isCapacitador=function(){return k.isCapacitador()},a.elegirEncuesta=function(a){c.go("configuracion.usuariosEncuesta",{encuestaId:a})},a.salir=function(){c.go("configuracion.usuarios")},a.agregar=function(){var b=d.open({animation:!0,templateUrl:"app/configuracion/usuarios/agregar/agregar.html",controller:"AgregarUsuarioCtrl",backdrop:"static",keyboard:!1,size:"lg",resolve:{data:function(){return{action:"agregar",encuestaId:a.encuestaId}}}});b.result.then(function(b){g.listar(a.encuestaId).then(function(c){a.usuarios=c.map(function(a){return a.nombreCompleto=a.apellidos.paterno+" "+a.apellidos.materno+", "+a.nombres,a}),a.alert={show:!0,message:"se agregó el usuario con dni "+b.dni,type:"success"}})["catch"](function(b){a.alert=b})})},a.modificar=function(b){var c=d.open({animation:!0,templateUrl:"app/configuracion/usuarios/agregar/agregar.html",controller:"AgregarUsuarioCtrl",backdrop:"static",keyboard:!1,size:"lg",resolve:{data:function(){return{action:"modificar",usuario:angular.copy(b),encuestaId:a.encuestaId}}}});c.result.then(function(b){g.listar(a.encuestaId).then(function(c){a.usuarios=c.map(function(a){return a.nombreCompleto=a.apellidos.paterno+" "+a.apellidos.materno+", "+a.nombres,a}),a.alert={show:!0,message:"se actualizó el usuario "+b.nombreCompleto,type:"success"}})["catch"](function(b){a.alert=b})})},a.resumen=function(){a.imprimirUsuarios=!1;var b=d.open({animation:!0,templateUrl:"app/configuracion/usuarios/resumen/resumen.html",controller:"ResumenUsuariosCtrl",size:"lg",backdrop:"static",keyboard:!1,resolve:{data:function(){return{usuarios:angular.copy(a.usuarios),encuesta:a.encuesta,encuestaId:a.encuestaId}}}});b.result.then(function(b){"numerar"==b.action?g.listar(a.encuestaId).then(function(b){a.usuarios=b,a.alert={show:!0,message:"se actualizó la numeración de los usuarios",type:"success"}})["catch"](function(b){a.alert=b}):"imprimir"==b.action&&(a.usuariosResumen=b.usuarios,a.imprimirResumen=!0,j(function(){i.print()},500),j(function(){a.imprimirResumen=!1},500))})},a.importar=function(){var b=d.open({animation:!0,templateUrl:"app/configuracion/usuarios/excel/excel.html",controller:"ExcelCtrl",backdrop:"static",keyboard:!1,size:"lg",resolve:{tabla:function(){return a.tabla}}});b.result.then(function(b){g.agregarMasivo(a.encuestaId,{usuarios:b}).then(function(b){return a.tempMsg=b,g.listar(a.encuestaId)}).then(function(b){a.usuarios=b.map(function(a){return a.nombreCompleto=a.apellidos.paterno+" "+a.apellidos.materno+", "+a.nombres,a}),a.alert={show:!0,type:"success",message:"Se agregaron los usuarios masivamente. Recuerde indicar la opción Resumen para asignar las encuestas a los encuestadores"},j(function(){a.resumen()},3e3)})["catch"](function(b){a.alert=b})})},a.eliminar=function(b){e.confirm({ok:function(){g.eliminar(a.encuestaId,b.usuario).then(function(){a.usuarios.splice(a.usuarios.indexOf(b),1),a.alert={show:!0,message:"se eliminó el usuario "+b.usuario,type:"success"}})["catch"](function(b){a.alert=b})},html:"<p>¿Está seguro que desea eliminar el usuario <strong>"+b.dni+"</strong>?</p>",color:"cuanto",title:"eliminar usuario",btnText:"Continuar"})},a.exportar=function(){a.$broadcast("export-excel",{id:"usuarios"})},a.imprimir=function(){a.imprimirUsuarios=!0,j(function(){i.print()},500)}}]),angular.module("sisgene").config(["$stateProvider",function(a){a.state("configuracion.usuarios",{url:"/usuarios",templateUrl:"app/configuracion/usuarios/usuarios.html",controller:"UsuariosCtrl",access:{requiredRoles:["ADMINISTRADOR","CAPACITADOR"]}}).state("configuracion.usuariosEncuesta",{url:"/usuarios/:encuestaId",templateUrl:"app/configuracion/usuarios/usuarios.html",controller:"UsuariosCtrl",access:{requiredRoles:["ADMINISTRADOR","CAPACITADOR"]}})}]),angular.module("sisgene").controller("ConsultarCtrl",["$scope","$modal","$timeout","Encuestas","Usuarios","usSpinnerService","$window","$q",function(a,b,c,d,e,f,g,h){d.listar().then(function(b){a.encuestas=b})["catch"](function(b){a.alert=b}),a.tabla={headers:[{title:"Encuestador","class":"col-sm-2"},{title:"Nro Encuesta","class":"col-sm-1 text-center"},{title:"Encuestado","class":"col-sm-2"},{title:"Fecha Desarrollo","class":"col-sm-1"},{title:"Hora Inicio","class":"col-sm-1 text-center"},{title:"Hora Termino","class":"col-sm-1 text-center"},{title:"Tiempo (hh:mm)","class":"col-sm-1"},{title:"Estado","class":"col-sm-1"}],headersResumen:[{title:"Encuestador","class":"col-sm-4"},{title:"Terminadas","class":"col-sm-2"},{title:"Porcentaje","class":"col-sm-2"},{title:"Tranferidas","class":"col-sm-2"},{title:"Por Tranferir","class":"col-sm-2"}]},a.elegirEncuesta=function(b){e.listar(b.codigo).then(function(b){a.supervisores=b.filter(function(a){return"SUPERVISOR"==a.tipo}).map(function(a){return a.nombreCompleto=a.apellidos.paterno+" "+a.apellidos.materno+", "+a.nombres,a}),a.usuarios=b.filter(function(a){
return"ENCUESTADOR"==a.tipo}).map(function(a){return a.nombreCompleto=a.apellidos.paterno+" "+a.apellidos.materno+", "+a.nombres,a})}),d.listarCategorias(b.codigo).then(function(b){a.categorias=b.map(function(a){return a.nombre})})},a.buscar=function(b){return b.$valid?(a.mostrarResultados=!0,a.encuesta=b.encuesta,void d.mostrarResultados(a.encuesta.codigo).then(function(c){a.encuesta.resultados=c.map(function(a){return a.encuestador.nombreCompleto=a.encuestador.apellidos.paterno+" "+a.encuestador.apellidos.materno+", "+a.encuestador.nombres,a}).filter(function(c){return b.supervisor?(a.supervisor=b.supervisor.usuario,c.supervisor.usuario==b.supervisor.usuario):b.encuestador?(a.encuestador=b.encuestador.usuario,c.encuestador.usuario==b.encuestador.usuario):!0})})):a.alert={show:!0,message:"elige una encuesta",type:"danger"}},a.salir=function(){a.mostrarResultados=!1,a.encuesta=void 0,a.supervisores=void 0,a.usuarios=void 0,a.supervisor=void 0,a.encuestador=void 0,a.reporteHeaders=void 0},a.resumen=function(){var d=b.open({animation:!0,templateUrl:"app/control/consultar/resumen/resumen.html",controller:"ResumenEncuestasCtrl",size:"lg",backdrop:"static",keyboard:!1,resolve:{data:function(){return{encuesta:{codigo:a.encuesta.codigo,descripcion:a.encuesta.descripcion},supervisor:a.supervisor,encuestador:a.encuestador}}}});d.result.then(function(b){a.resumen=b,a.imprimirResumen=!0,c(function(){g.print()},500),c(function(){a.imprimirResumen=!1},500)})},a.exportarExtra=function(b){f.spin("spinner"),d.mostrarResultadosReporte(a.encuesta.codigo,b).then(function(d){a.diccionario=d.diccionario,a.respuestas=d.respuestas,a.reporteBaseHeaders=[],angular.forEach(d.respuestas[0],function(b,c){a.reporteBaseHeaders.push(c)}),c(function(){f.stop("spinner"),export_table_to_excel([{id:"reporte-diccionario",sheet:"Diccionario"},{id:"reporte-base",sheet:"Base"}],a.encuesta.codigo+"_reporte_por_"+b)},1e3)})}}]),angular.module("sisgene").config(["$stateProvider",function(a){a.state("control.consultar",{url:"/consultar",templateUrl:"app/control/consultar/consultar.html",controller:"ConsultarCtrl",access:{requiredRoles:["ADMINISTRADOR"]}})}]),angular.module("sisgene").controller("ResumenEncuestasCtrl",["$scope","$modalInstance","Encuestas","data",function(a,b,c,d){a.encuesta=d.encuesta,a.tabla={headers:[{title:"Encuestador","class":"col-sm-4"},{title:"Terminadas","class":"col-sm-2"},{title:"Porcentaje","class":"col-sm-2"},{title:"Tranferidas","class":"col-sm-2"},{title:"Por Tranferir","class":"col-sm-2"}]},c.mostrarResultadosResumen(a.encuesta.codigo,{supervisor:d.supervisor,encuestador:d.encuestador}).then(function(b){a.resumen=b}),a.salir=function(){b.dismiss()},a.imprimir=function(){b.close(a.resumen)}}]),angular.module("sisgene").controller("ControlCtrl",["$scope",function(a){a.message="Hello"}]),angular.module("sisgene").config(["$stateProvider",function(a){a.state("control",{url:"/control",templateUrl:"app/control/control.html",controller:"ControlCtrl",access:{requiredRoles:["ADMINISTRADOR"]}})}]),angular.module("sisgene").controller("MainCtrl",["$scope","$rootScope","$auth",function(a,b,c){a.ingresar=function(d){c.login(d).then(function(c){a.currentUser=c,b.$broadcast("loginSuccessful")})["catch"](function(b){a.alert={show:!0,type:"danger",message:b}})}}]),angular.module("sisgene").config(["$stateProvider",function(a){a.state("inicio",{url:"/",templateUrl:"app/main/main.html",controller:"MainCtrl",access:!1})}]),angular.module("sisgene").factory("Accesos",["Request","$q",function(a,b){var c="api/accesos/";return{listar:function(){var d=b.defer();return a.listar(c).then(function(a){d.resolve(a.accesos)})["catch"](function(a){d.reject(a)}),d.promise}}}]),angular.module("sisgene").directive("capitalize",function(){return{require:"ngModel",link:function(a,b,c,d){var e=function(a){void 0==a&&(a="");var b=a.toUpperCase();return b!==a&&(d.$setViewValue(b),d.$render()),b};d.$parsers.push(e),e(a[c.ngModel])}}}),angular.module("sisgene").factory("Cuestionarios",["Request","$q",function(a,b){var c="api/cuestionarios/";return{listar:function(d){var e=b.defer();return a.listar(c+d+"/").then(function(a){e.resolve(a.cuestionarios)})["catch"](function(a){e.reject(a)}),e.promise},agregarPregunta:function(b,d){return a.agregar(c+b+"/",d)},agregarSecciones:function(b,d){return a.agregar(c+b+"/secciones",d)},modificarPregunta:function(b,d){return a.actualizar(c+b+"/",d.numero,d)},eliminarPregunta:function(b,d){return a.eliminar(c+b+"/",d)}}}]),angular.module("sisgene").factory("Encuestas",["Request","$q",function(a,b){var c="api/encuestas/";return{listar:function(d){var e=b.defer();return a.listar(c,{tipo:d}).then(function(a){e.resolve(a.encuestas)})["catch"](function(a){e.reject(a)}),e.promise},listarEquipos:function(){var c=b.defer();return a.listar("api/equipos/").then(function(a){c.resolve(a.equipos)})["catch"](function(a){c.reject(a)}),c.promise},listarEstados:function(){var c=b.defer();return a.listar("api/estados/").then(function(a){c.resolve(a.estados)})["catch"](function(a){c.reject(a)}),c.promise},agregar:function(b){return a.agregar(c,b)},mostrar:function(d){var e=b.defer();return a.mostrar(c,d).then(function(a){e.resolve(a.data)})["catch"](function(a){e.reject(a)}),e.promise},actualizar:function(b,d){return a.actualizar(c,b,d)},eliminar:function(b){return a.eliminar(c,b)},listarCategorias:function(d){var e=b.defer();return a.mostrarController(c,d,"categorias").then(function(a){e.resolve(a.categorias)})["catch"](function(a){e.reject(a)}),e.promise},mostrarResultados:function(d){var e=b.defer();return a.mostrarController(c,d,"resultados").then(function(a){e.resolve(a.resultados)})["catch"](function(a){e.reject(a)}),e.promise},mostrarResultadosResumen:function(d,e){var f=b.defer();return a.mostrarController(c,d,"resultados/resumen",e).then(function(a){f.resolve(a.resultados)})["catch"](function(a){f.reject(a)}),f.promise},mostrarResultadosReporte:function(d,e){var f=b.defer();return a.mostrarController(c,d,"resultados/reporte",{categoria:e}).then(function(a){f.resolve({diccionario:a.diccionario?a.diccionario:[],respuestas:a.respuestas?a.respuestas:[]})})["catch"](function(a){f.reject(a)}),f.promise}}}]),angular.module("sisgene").factory("excel",["$q","$rootScope","$window",function(a,b,c){var d=function(a){angular.extend(this,a)};return d.readFile=function(c,d,e){var f=a.defer();return XLSXReader(c,d,e,function(a){b.$apply(function(){f.resolve(a)})}),f.promise},d}]).directive("exportTable",function(){return{restrict:"A",link:function(a,b,c){a.$on("export-excel",function(a,b){b.id==c.id&&export_table_to_excel([{id:c.id,sheet:c.sheet}],c.archivo)})}}}),angular.module("sisgene").factory("Modal",["$rootScope","$modal",function(a,b){function c(c,d){var e=a.$new();return c=c||{},d=d||"modal-default",angular.extend(e,c),b.open({templateUrl:"components/modal/modal.html",windowClass:d,scope:e})}return{confirm:function(){var a=Array.prototype.slice.call(arguments),b=a.shift();b.ok=b.ok||angular.noop,b.cancel=b.cancel||angular.noop,b.html=b.html||"<p>Are you sure you want to continue?</p>",b.title=b.title||"Confirm dialog",b.btnText=b.btnText||"Continue",b.color=b.color||"warning";var d=c({modal:{dismissable:!0,title:b.title,html:b.html,buttons:[{classes:"btn-"+b.color,text:b.btnText,click:function(a){d.close(a)}},{classes:"btn-cuanto",text:"Cancelar",click:function(a){d.dismiss(a)}}]}},"modal-"+b.color);d.result.then(function(c){b.ok.apply(c,a)},function(c){b.cancel.apply(c,a)})}}}]),angular.module("sisgene").controller("NavbarCtrl",["$scope","$state","$auth","$authState",function(a,b,c,d){a.configuracion={title:"configuracion",state:"configuracion",dropdown:[{title:"parametros",state:"configuracion.parametros",show:function(){return d.isAdministrador()}},{title:"tabla de usuarios",state:"configuracion.usuarios",show:function(){return d.isAdministrador()||d.isCapacitador()}},{title:"cuestionario",state:"configuracion.cuestionario",show:function(){return d.isAdministrador()}},{title:"roles",state:"configuracion.roles",show:function(){return d.isAdministrador()}},{title:"accesos",state:"configuracion.accesos",show:function(){return d.isAdministrador()}}]},a.control={title:"control",state:"control",dropdown:[{title:"Consultar Encuestas",state:"control.consultar"}]},a.isCollapsed=!0,a.$on("notloggedin",function(){a.usuario=null}),a.$on("loginSuccessful",function(){a.usuario=d.currentUser,a.isAdministrador=d.isAdministrador(),a.isCapacitador=d.isCapacitador()}),a.isActive=function(a){var c=-1!=b.current.name.indexOf(a.state);if(c){if(a.dropdown){var d=a.dropdown.filter(function(a){return-1!=b.current.name.indexOf(a.state)})[0];d&&(a.sub=" - "+d.title)}}else delete a.sub;return c},a.ir=function(a){b.go(a)},a.elegirSub=function(a,b){b.sub=" - "+a},a.logout=function(){c.logout().then(function(){a.usuario=null})["catch"](function(b){400==b.status&&(a.usuario=null)})}}]),angular.module("ngAuth",["ngResource","http-auth-interceptor"]).config(function(){}).run(["$rootScope","$authState","$state","$role",function(a,b,c,d){a.$on("event:auth-loginRequired",function(){b.currentUser=null,b.checkState=!1,b.redirectToLogin&&c.go(d.loginState()),a.$broadcast("unauthorized")})}]).provider("$auth",function(){var a="/api/auth/session",b="/api/users/me";this.setLoginEndpoint=function(b){return a=b,this},this.setUserEndpoint=function(a){return b=a,this},this.$get=["$q","$resource","$authState","$role","$state",function(c,d,e,f,g){var h=d(a),i=d(b);return{login:function(a){var b=c.defer();return h.save(a,function(a){if(!a.success)return b.reject(a.msg);var c=angular.fromJson(angular.toJson(a.data));"ADMINISTRADOR"==c.rol||"CAPACITADOR"==c.rol?(e.currentUser=c,g.go(e.previousState.name,e.previousState.params),b.resolve(c)):b.reject("el usuario no tiene privilegios de Administrador")},function(){b.reject("el usuario y/o clave son incorrectos")}),b.promise},logout:function(){var a=c.defer();return h["delete"](function(){e.currentUser=null,e.checkState=!1,e.previousState.name=f.redirectState(),g.go(f.loginState()),a.resolve()},function(b){a.reject(b)}),a.promise},currentUser:function(){var a=c.defer();return i.get(function(b){b=angular.fromJson(angular.toJson(b)),e.currentUser=b,a.resolve(b)},function(b){a.reject(b)}),a.promise}}}]}).provider("$role",function(){var a="home",b="login";this.setStates=function(c){return a=c.redirectState||a,b=c.loginState||b,this},this.$get=["$authState","$state",function(c,d){return c.previousState={name:a},{checkRole:function(b,e,f){var g=!1;e.access&&e.access.requiredRoles&&(g=-1!=e.access.requiredRoles.indexOf(c.currentUser.rol),g||(b.preventDefault(),f&&d.go(a)))},redirectState:function(){return a},loginState:function(){return b}}}]}).service("$authState",function(){var a=this;a.previousState={},a.checkState=!0,a.currentUser=null,a.redirectToLogin=!0,a.isAdministrador=function(){return null!=a.currentUser&&"ADMINISTRADOR"==a.currentUser.rol},a.isCapacitador=function(){return null!=a.currentUser&&"CAPACITADOR"==a.currentUser.rol}}).factory("$authVerifier",["$authState","$auth","$state","$q","$role",function(a,b,c,d,e){return{verifyStateChangeStart:function(b,f,g){var h=d.defer();return f.name!=e.loginState()?a.previousState={name:f.name,params:g}:a.checkState=!1,a.checkState?a.currentUser?c.is(e.loginState())?(a.checkState=!1,e.checkRole(b,f,!0),h.resolve()):(e.checkRole(b,f,!1),h.resolve()):(b.preventDefault(),h.reject({message:"not logged in"})):(a.checkState=!0,h.resolve()),h.promise}}}]),angular.module("sisgene").directive("onlyDigits",function(){return{restrict:"A",require:"?ngModel",link:function(a,b,c,d){d.$parsers.push(function(a){if(void 0==a)return"";var b=a.replace(/[^0-9]/g,"");return b!==a&&(d.$setViewValue(b),d.$render()),b})}}}),angular.module("sisgene").directive("limitTo",function(){return{restrict:"A",link:function(a,b,c){var d=parseInt(c.limitTo);b.bind("keydown keypress",function(a){return 8!=a.which&&46!=a.which&&this.value.length==d?!1:void 0})}}}),angular.module("sisgene").factory("Preguntas",["Request","$q",function(a,b){var c="api/preguntas/";return{listarTipos:function(){var d=b.defer();return a.listar(c+"tipos").then(function(a){d.resolve(a.tipos)})["catch"](function(a){d.reject(a)}),d.promise}}}]),angular.module("sisgene").service("Request",["$http","$q",function(a,b){this.listar=function(c,d){var e=b.defer();return a.get("/sisgene/"+c,{params:d}).then(function(a){a.data.success?e.resolve(a.data):e.reject({show:!0,type:"danger",message:a.data.msg})})["catch"](function(a){var b={show:!0,type:"danger",message:a.data};e.reject(b)}),e.promise},this.agregar=function(c,d){var e=b.defer();return a.post("/sisgene/"+c,d).then(function(a){a.data.success?e.resolve(a.data):e.reject({show:!0,type:"danger",message:a.data.msg})})["catch"](function(a){var b={show:!0,type:"danger",message:a.data};e.reject(b)}),e.promise},this.actualizar=function(c,d,e){var f=b.defer();return a.put("/sisgene/"+c+d,e).then(function(a){a.data.success?f.resolve():f.reject({show:!0,type:"danger",message:a.data.msg})})["catch"](function(a){var b={show:!0,type:"danger",message:a.data};f.reject(b)}),f.promise},this.mostrar=function(c,d){var e=b.defer();return a.get("/sisgene/"+c+d).then(function(a){a.data.success?e.resolve(a.data):e.reject({show:!0,type:"danger",message:a.data.msg})})["catch"](function(a){var b={show:!0,type:"danger",message:a.data};e.reject(b)}),e.promise},this.mostrarController=function(c,d,e,f){var g=b.defer();return a.get("/sisgene/"+c+d+"/"+e,{params:f}).then(function(a){a.data.success?g.resolve(a.data):g.reject({show:!0,type:"danger",message:a.data.msg})})["catch"](function(a){var b={show:!0,type:"danger",message:a.data};g.reject(b)}),g.promise},this.eliminar=function(c,d){var e=b.defer();return a["delete"]("/sisgene/"+c+d).then(function(a){a.data.success?e.resolve():e.reject({show:!0,type:"danger",message:a.data.msg})})["catch"](function(a){var b={show:!0,type:"danger",message:a.data};e.reject(b)}),e.promise}}]),angular.module("sisgene").factory("Roles",["Request","$q",function(a,b){var c="api/roles/";return{listar:function(){var d=b.defer();return a.listar(c).then(function(a){d.resolve(a.roles)})["catch"](function(a){d.reject(a)}),d.promise},agregar:function(b){return a.agregar(c,b)},mostrar:function(d){var e=b.defer();return a.mostrar(c,d).then(function(a){e.resolve(a.data)})["catch"](function(a){e.reject(a)}),e.promise},actualizar:function(b,d){return a.actualizar(c,b,d)},eliminar:function(b){return a.eliminar(c,b)}}}]),angular.module("sisgene").factory("Usuarios",["Request","$q",function(a,b){var c="api/usuarios/";return{listar:function(d){var e=b.defer();return a.listar(c+d+"/").then(function(a){e.resolve(a.usuarios)})["catch"](function(a){e.reject(a)}),e.promise},agregar:function(b,d){return a.agregar(c+b+"/",d)},agregarMasivo:function(d,e){var f=b.defer();return a.agregar(c+d+"/masivo",e).then(function(a){f.resolve(a.msg)})["catch"](function(a){f.reject(a)}),f.promise},agregarNumerar:function(b,d){return a.agregar(c+b+"/numerar",d)},modificar:function(b,d){return a.actualizar(c+b+"/",d.usuario,d)},eliminar:function(b,d){return a.eliminar(c+b+"/",d)}}}]),angular.module("sisgene").factory("Zonificacion",["Request","$q",function(a,b){var c="api/zonificacion/";return{listarDepartamentos:function(){var d=b.defer();return a.listar(c).then(function(a){d.resolve(a.departamentos)})["catch"](function(a){d.reject(a)}),d.promise},listarProvincias:function(d){var e=b.defer();return a.listar(c+d).then(function(a){e.resolve(a.provincias)})["catch"](function(a){e.reject(a)}),e.promise},listarDistritos:function(d,e){var f=b.defer();return a.listar(c+d+"/"+e).then(function(a){f.resolve(a.distritos)})["catch"](function(a){f.reject(a)}),f.promise}}}]),angular.module("sisgene").run(["$templateCache",function(a){a.put("app/configuracion/accesos/accesos.html",'<div class="panel panel-cuanto"><div class=panel-heading>Tabla de Accesos</div><div class=panel-body><alert type={{alert.type}} ng-if=alert.show close="alert.show=false">{{alert.message}}</alert><fieldset class="form-horizontal form-group col-md-offset-2 col-md-6"><label class="control-label col-md-6">Rol</label><div class=col-md-6><select class=form-control ng-model=rol ng-change=seleccionarRol(rol) ng-options="rol.descripcion for rol in roles"></select></div></fieldset><div class=col-md-12><h4>Gestión de Accessos</h4><div class=col-md-5><div class="panel panel-cuanto"><div class=panel-heading>Relación de Funcionalidades</div><div class=table-funcionalidad><table class=table><tbody><tr ng-repeat="func in filtrar(tabla.accesos)" ng-click="seleccionar(func, seleccion.func)" ng-class="{\'active-func-cuanto\': isSelected(func, seleccion.func)}"><td>{{func.descripcion}}</td></tr></tbody></table></div></div></div><div class="col-md-2 text-center panel-funcionalidad-btn"><p class=col-xs-12><button class="btn btn-cuanto" ng-click=agregarTodo()>Agregar Todo</button></p><p class=col-xs-12><button class="btn btn-cuanto" ng-click=agregar()>Agregar</button></p><p class=col-xs-12><button class="btn btn-cuanto" ng-click=quitar()>Quitar</button></p><p class=col-xs-12><button class="btn btn-cuanto" ng-click=quitarTodo()>Quitar Todo</button></p></div><div class=col-md-5><div class="panel panel-cuanto"><div class=panel-heading>Funcionalidades Asignadas</div><div class=table-funcionalidad><table class=table><tbody><tr ng-repeat="asig in rol.accesos" ng-click="seleccionar(asig, seleccion.asig)" ng-class="{\'active-func-cuanto\': isSelected(asig, seleccion.asig)}"><td>{{asig.descripcion}}</td></tr></tbody></table></div><fieldset class="form-group text-center"><button class="btn btn-cuanto" ng-click=guardar()>Guardar</button></fieldset></div></div></div></div></div>'),a.put("app/configuracion/configuracion.html",'<div class=container ui-view=""></div>'),a.put("app/configuracion/cuestionario/cuestionario.html",'<div class="col-md-offset-3 col-md-6" ng-if=!encuestaId><div class="panel panel-cuanto"><div class=panel-heading>Configurar Cuestionario</div><div class=panel-body><alert type={{alert.type}} ng-if=alert.show close="alert.show=false">{{alert.message}}</alert><fieldset class=form-group><label for=encuesta>Código de Encuesta</label><select ng-model=encuesta id=encuesta class=form-control required ng-options="encuesta.codigo for encuesta in encuestas"></select></fieldset><fieldset class=form-group><label for=descripcion>Descripción</label><textarea id=descripcion type=text rows=3 class=form-control ng-model=encuesta.descripcion ng-disabled=true></textarea></fieldset><fieldset class=form-group><button class="btn btn-cuanto" type=submit ng-click=elegirEncuesta(encuesta.codigo)>Aceptar</button></fieldset></div></div></div><div ng-if=encuestaId><div class=col-sm-12 ui-view=""></div></div>'),a.put("app/configuracion/cuestionario/definir/agregar/agregar.html",'<div class="modal-header modal-header-cuanto">{{btnActionLabel}} Pregunta</div><div class="modal-body clearfix"><alert type={{alert.type}} ng-if=alert.show close="alert.show=false">{{alert.message}}</alert><fieldset class=form-group><label>Nro de Pregunta</label><input type=number class=form-control required ng-model="pregunta.numero"></fieldset><fieldset class=form-group><label>Sección</label><select class=form-control ng-model=seccionSeleccionada ng-options="seccion.muestra for seccion in form.secciones" ng-change=elegirSeccion(seccionSeleccionada) required></select></fieldset><fieldset class="form-group checkbox" ng-show=habilitarSubseccion><label><input type=checkbox ng-model=form.subseccion ng-change="verificarSubseccion(form.subseccion)"> Subsección</label><select class=form-control ng-show=form.subseccion ng-change=elegirSubseccion(subseccionSeleccionada) ng-model=subseccionSeleccionada ng-options="subseccion.muestra for subseccion in form.subsecciones"></select></fieldset><fieldset class=form-group><label>Descripcion</label><textarea type=text class=form-control rows=3 required placeholder=descripcion ng-model=pregunta.descripcion> </textarea></fieldset><fieldset class=form-group><label>Comentario</label><textarea type=text class=form-control rows=3 required placeholder=comentario ng-model=pregunta.comentario> </textarea></fieldset><fieldset class=form-group><label><input type=checkbox ng-model=form.multipersona ng-change="asignarMultipersona(form.multipersona)"> Multipersona</label></fieldset><fieldset class=form-group><label>Tipo de Respuesta</label><select class=form-control ng-model=pregunta.tipo ng-change=setTipoRespuesta() ng-options="tipo.descripcion for tipo in form.tipos track by tipo.id" required></select></fieldset><fieldset class=form-group collapse=!form.mostrarEjecutar><!-- respuesta unica / multiple / mixta--><div ng-if=form.lista.show><alert type={{alertFilas.type}} ng-if=alertFilas.show close="alertFilas.show=false">{{alertFilas.message}}</alert><fieldset class=form-group ng-if=form.multipleOpcion><label>nro de respuestas</label><input type=number class=form-control ng-model=pregunta.numeroRespuestasMaximo min=1 required></fieldset><fieldset class=form-group ng-if=form.multipleOpcion><label><input type=checkbox ng-model="pregunta.ordenada"> ordenada</label></fieldset><button class="btn btn-cuanto" ng-click=form.lista.agregarFila()><i class="glyphicon glyphicon-plus"></i> opciones</button><table class=table><thead><tr><th ng-repeat="header in form.lista.headers" ng-class=header.class>{{header.label}}</th></tr></thead><tbody><tr ng-repeat="fila in form.lista.filas track by $index"><td>{{$index + 1}}</td><td><input class=form-control ng-model=fila.opcion ng-change="asignarFilas(form.lista.filas, false)"></td><td><input type=number min=0 class=form-control ng-model=fila.valor ng-change="asignarFilas(form.lista.filas, true, fila.valor)"></td><td><a href="" class=a-cuanto ng-click=form.lista.filas.splice($index,1)><i class="glyphicon glyphicon-remove"></i></a></td></tr></tbody></table></div><!-- matriz simple/multiple--><div ng-if=form.matriz.show><fieldset class="form-group col-xs-6"><div class="input-group cuanto-input-fila"><input class=form-control placeholder="nueva fila" ng-model="fila"> <span class="input-group-addon pointer" ng-click="form.matriz.agregarFila(fila);fila=null;"><i class="glyphicon glyphicon-plus"></i></span></div><table class=table><thead><tr><th class=col-xs-10>filas</th><th class=col-xs-2></th></tr></thead><tbody><tr ng-repeat="f in form.matriz.filas track by $index"><td>{{f.opcion}}</td><td><a href="" class=a-cuanto ng-click=form.matriz.filas.splice($index,1)><i class="glyphicon glyphicon-remove"></i></a></td></tr></tbody></table></fieldset><fieldset class="form-group col-xs-6"><alert type={{alertMatriz.type}} ng-if=alertMatriz.show close="alertMatriz.show=false">{{alertMatriz.message}}</alert><div class="input-group cuanto-input-columna"><input class="form-control input-opcion" placeholder="nueva columna" ng-model="form.matriz.opcion.columna"> <input type=number min=0 class="form-control input-numero" placeholder=valor ng-model="form.matriz.opcion.valor"> <span class="input-group-addon pointer" ng-click="form.matriz.agregarColumna(form.matriz.opcion.columna, form.matriz.opcion.valor)"><i class="glyphicon glyphicon-plus"></i></span></div><table class=table><thead><tr><th class=col-xs-8>columnas</th><th class=col-xs-2>valor</th><th class=col-xs-2></th></tr></thead><tbody><tr ng-repeat="c in form.matriz.columnas track by $index"><td>{{c.opcion}}</td><td>{{c.valor}}</td><td><a href="" class=a-cuanto ng-click=form.matriz.columnas.splice($index,1)><i class="glyphicon glyphicon-remove"></i></a></td></tr></tbody></table></fieldset></div><!--pregunts abierta--><div ng-if=form.esPreguntaAbierta><alert type={{alertAbierta.type}} ng-if=alertAbierta.show close="alertAbierta.show=false">{{alertAbierta.message}}</alert><fieldset class=form-group><label>Subtipo</label><select class=form-control ng-model=pregunta.subtipo ng-change=elegirAbiertaSubtipo() ng-options="subtipo for subtipo in form.abiertaSubtipos" required></select></fieldset></div><div ng-if="form.esPreguntaAbierta&&pregunta.subtipo==\'numerico\'"><select class=form-control ng-model=pregunta.tipoNumerico ng-options="tipo for tipo in form.numericoTipos" required></select><br><div class=row><fieldset class="form-group col-xs-6"><label>Desde</label><input type=number class=form-control required ng-model="pregunta.desde"></fieldset><fieldset class="form-group col-xs-6"><label>Hasta</label><input type=number class=form-control required ng-model="pregunta.hasta"></fieldset></div></div></fieldset><fieldset class="form-group pull-right"><button class="btn btn-cuanto" ng-show=form.mostrarEjecutar ng-click=ejecutar()>{{btnActionLabel}}</button> <button class="btn btn-cuanto" popover=salir popover-trigger=mouseenter popover-placement=top popover-popup-delay=250 popover-append-to-body=true ng-click=salir()>Salir</button></fieldset></div>'),a.put("app/configuracion/cuestionario/definir/definir.html",'<!--print only seccion para generar reporte de cuestionario de preguntas--><div print-section print-only print-if=imprimirCuestionario><div class=text-center><h3>Encuesta {{encuesta.codigo}}</h3></div><p class=text-center>{{encuesta.descripcion}}</p><div class="panel panel-cuanto" ng-repeat="seccion in encuesta.secciones"><div class=panel-heading><h3>{{seccion.seccion}} - {{seccion.descripcion}}</h3></div><div class=panel-body ng-repeat="pregunta in seccion.preguntas"><strong>{{pregunta.numero}} - {{pregunta.descripcion}}</strong> <strong>({{pregunta.tipo.descripcion}})</strong><br><span ng-if=pregunta.tipo.filas&&!pregunta.tipo.columnas><table class=table print-avoid-break><thead><tr><th>opción</th><th>valor</th></tr></thead><tbody><tr ng-repeat="fila in pregunta.tipo.filas"><td>{{fila.opcion}}</td><td>{{fila.valor}}</td></tr></tbody></table></span><table class=table ng-if=pregunta.tipo.filas&&pregunta.tipo.columnas print-avoid-break><thead><tr><th></th><th ng-repeat="columna in pregunta.tipo.columnas">{{columna.opcion}} ({{columna.valor}})</th></tr></thead><tbody><tr ng-repeat="fila in pregunta.tipo.filas"><td>{{fila.opcion}}</td><td ng-repeat="columna in pregunta.tipo.columnas"></td></tr></tbody></table></div><div ng-repeat="subseccion in seccion.subsecciones"><div class="panel-heading panel-heading-subseccion"><h4>{{subseccion.subseccion}} - {{subseccion.descripcion}}</h4></div><div class=panel-body ng-repeat="pregunta in subseccion.preguntas" print-avoid-break><strong>{{pregunta.numero}} - {{pregunta.descripcion}}</strong> <strong>({{pregunta.tipo.descripcion}})</strong><br><span ng-if=pregunta.tipo.filas&&!pregunta.tipo.columnas><table class=table print-avoid-break><thead><tr><th>opción</th><th>valor</th></tr></thead><tbody><tr ng-repeat="fila in pregunta.tipo.filas"><td>{{fila.opcion}}</td><td>{{fila.valor}}</td></tr></tbody></table></span><table class=table ng-if=pregunta.tipo.filas&&pregunta.tipo.columnas><thead><tr><th></th><th ng-repeat="columna in pregunta.tipo.columnas">{{columna.opcion}} ({{columna.valor}})</th></tr></thead><tbody><tr ng-repeat="fila in pregunta.tipo.filas"><td>{{fila.opcion}}</td><td ng-repeat="columna in pregunta.tipo.columnas"></td></tr></tbody></table></div></div></div></div><div class="panel panel-cuanto" ng-if=!imprimirCuestionario><div class=panel-heading>Configurar Cuestionario de Preguntas</div><div class=panel-body><alert type={{alert.type}} ng-if=alert.show close="alert.show=false">{{alert.message}}</alert><div class=col-md-12><div class=text-center><h3>Encuesta {{encuesta.codigo}}</h3></div><p class=text-center>{{encuesta.descripcion}}</p><p><button class="btn btn-cuanto" ng-click=editarSeccion()>Editar sección y subsección</button></p></div><table class=table ng-if=!primeraVez><thead><tr><th ng-repeat="header in tabla.headers" ng-class=header.class>{{header.title}}</th><th colspan=2 class=col-sm-1></th></tr></thead><tbody><tr dir-paginate="pregunta in encuesta.preguntas | orderBy: [\'seccion\',\'subseccion\',\'numero\'] |itemsPerPage: tabla.paginacion.numero" current-page=tabla.paginacion.actual pagination-id=preguntas><td>{{pregunta.numero}}</td><td class=text-center>{{pregunta.seccion}}</td><td class=text-center>{{pregunta.subseccion}}</td><td>{{pregunta.descripcion}}</td><td>{{pregunta.tipo.descripcion}}</td><td>{{pregunta.multipersona ? \'si\':\'no\'}}</td><td><button class="btn btn-cuanto btn-sm" ng-click=modificar(pregunta)><i class="glyphicon glyphicon-pencil"></i></button></td><td><button class="btn btn-cuanto btn-sm" ng-click=eliminar(pregunta)><i class="glyphicon glyphicon-trash"></i></button></td></tr></tbody></table><div class="row text-center" ng-if="encuesta.preguntas.length > 0"><dir-pagination-controls max-size=5 pagination-id=preguntas class=paginacion></dir-pagination-controls></div></div><div class=panel-footer><button class="btn btn-cuanto" ng-if=!primeraVez ng-click=agregar()>Agregar Pregunta</button> <button class="btn btn-cuanto" ng-if=!primeraVez ng-click=imprimir()><i class="glyphicon glyphicon-print"></i></button> <button class="btn btn-cuanto" ng-click=salir()>Salir</button></div></div>'),a.put("app/configuracion/cuestionario/definir/imprimir/imprimir.html",'<div class="modal-header modal-header-cuanto">Cuestionario de preguntas {{encuesta.codigo}}</div><div class="modal-body clearfix"><div print-section print-if=imprimirCuestionario><div class=text-center><h3>Encuesta {{encuesta.codigo}}</h3></div><p class=text-center>{{encuesta.descripcion}}</p><div class="panel panel-cuanto" ng-repeat="seccion in encuesta.secciones"><div class=panel-heading>{{seccion.seccion}} - {{seccion.descripcion}}</div><div class=panel-body ng-repeat="pregunta in seccion.preguntas"><strong>{{pregunta.numero}} - {{pregunta.descripcion}}</strong> <strong>({{pregunta.tipo.descripcion}})</strong><br><span ng-if=pregunta.tipo.filas&&!pregunta.tipo.columnas><table class=table><thead><tr><th>opción</th><th>valor</th></tr></thead><tbody><tr ng-repeat="fila in pregunta.tipo.filas"><td>{{fila.opcion}}</td><td>{{fila.valor}}</td></tr></tbody></table></span><table class=table ng-if=pregunta.tipo.filas&&pregunta.tipo.columnas><thead><tr><th></th><th ng-repeat="columna in pregunta.tipo.columnas">{{columna.opcion}} ({{columna.valor}})</th></tr></thead><tbody><tr ng-repeat="fila in pregunta.tipo.filas"><td>{{fila.opcion}}</td><td ng-repeat="columna in pregunta.tipo.columnas"></td></tr></tbody></table></div><div ng-repeat="subseccion in seccion.subsecciones"><div class="panel-heading panel-heading-subseccion">{{subseccion.subseccion}} - {{subseccion.descripcion}}</div><div class=panel-body ng-repeat="pregunta in subseccion.preguntas"><strong>{{pregunta.numero}} - {{pregunta.descripcion}}</strong> <strong>({{pregunta.tipo.descripcion}})</strong><br><span ng-if=pregunta.tipo.filas&&!pregunta.tipo.columnas><table class=table><thead><tr><th>opción</th><th>valor</th></tr></thead><tbody><tr ng-repeat="fila in pregunta.tipo.filas"><td>{{fila.opcion}}</td><td>{{fila.valor}}</td></tr></tbody></table></span><table class=table ng-if=pregunta.tipo.filas&&pregunta.tipo.columnas><thead><tr><th></th><th ng-repeat="columna in pregunta.tipo.columnas">{{columna.opcion}} ({{columna.valor}})</th></tr></thead><tbody><tr ng-repeat="fila in pregunta.tipo.filas"><td>{{fila.opcion}}</td><td ng-repeat="columna in pregunta.tipo.columnas"></td></tr></tbody></table></div></div></div></div><fieldset class="form-group pull-right"><button class="btn btn-cuanto" ng-click=confirmarImprimir()><i class="glyphicon glyphicon-print"></i></button> <button class="btn btn-cuanto" ng-click=salir()>Salir</button></fieldset></div>'),a.put("app/configuracion/cuestionario/definir/seccion/seccion.html",'<div class="modal-header modal-header-cuanto">Sección y Subsección</div><div class=modal-body><alert type={{alert.type}} ng-if=alert.show close="alert.show=false">{{alert.message}}</alert><fieldset class=form-group><label>descripción</label><textarea cols=3 ng-model=seccion.descripcion class=form-control placeholder="ingrese descripción"></textarea></fieldset><fieldset class=form-group><label>categoría</label><input class=form-control ng-model=seccion.categoria placeholder="ingrese categoría"></fieldset><fieldset class=form-group><button class="btn btn-cuanto" ng-click=agregarSeccion(seccion)><i class="glyphicon glyphicon-plus"></i> sección</button></fieldset><div class="panel panel-cuanto" ng-repeat="s in secciones"><div class="panel-heading panel-secciones clearfix"><div class="col-xs-12 seccion-descripcion">{{s.seccion}} - {{s.descripcion}}<div class=pull-right><button class="btn btn-cuanto btn-group-cuanto" ng-click=agregarSubseccion(s)><i class="glyphicon glyphicon-plus"></i> subsección</button> <button class="btn btn-cuanto btn-group-cuanto" ng-click=eliminarSeccion($index)><i class="glyphicon glyphicon-remove"></i></button></div></div><div class="col-xs-8 seccion-categoria">{{s.categoria}}</div></div><div class=panel-body ng-if="s.subsecciones.length>0"><table class=table><thead><tr><th ng-repeat="h in tabla.headers" ng-class=h.class>{{h.title}}</th><th class=col-sm-1></th></tr></thead><tbody><tr ng-repeat="sub in s.subsecciones"><td>{{sub.subseccion}}</td><td><input ng-model=sub.descripcion class=form-control placeholder="ingrese subsección"></td><td><a href="" class=a-cuanto ng-click="eliminarSubseccion(s.subsecciones, $index)"><i class="glyphicon glyphicon-remove"></i></a></td></tr></tbody></table></div></div></div><div class=modal-footer id=footer-secciones><button class="btn btn-cuanto" ng-click=aceptar()>Guardar</button> <button class="btn btn-cuanto" ng-click=salir()>Salir/Cancelar</button></div>'),
a.put("app/configuracion/parametros/agregar/agregar.html",'<div class="modal-header modal-header-cuanto">Parámetros de Encuesta</div><div class=modal-body><alert type={{alert.type}} ng-if=alert.show close="alert.show=false">{{alert.message}}</alert><form class=form-horizontal novalidate name=form><fieldset class="row form-group"><label class="col-md-3 control-label" for=encuestaId>Código de Encuesta(*)</label><div class=col-md-3><input id=encuestaId required class=form-control placeholder="codigo encuesta" ng-model=encuesta.codigo capitalize></div><label class="col-md-3 control-label" for=nroEncuestas>Encuestas x Usuario(*)</label><div class=col-md-3><input id=nroEncuestas required type=number integer class=form-control ng-change=verificarNumeroEncuestas(encuesta.numero) placeholder="numero encuestas" ng-model="encuesta.numero"></div></fieldset><fieldset class="row form-group"><label class="col-md-3 control-label" for=descripcion>Descripción (*)</label><div class=col-md-9><textarea id=descripcion type=text required rows=3 class=form-control placeholder=descripción ng-model=encuesta.descripcion capitalize></textarea></div></fieldset><div class=row><div class=col-md-6><p><label class="col-md-offset-1 control-label">Rango de Ejecución Encuesta (*)</label></p><fieldset class=form-group><label class="col-md-3 control-label">desde</label><div class=col-md-6><div class=input-group><input class=form-control datepicker-popup={{date.format}} min-date=date.min ng-model=encuesta.desde is-open=date.desde datepicker-options=date.options ng-required=true show-weeks=false current-text=Hoy clear-text=Borrar close-text="Cerrar"> <span class=input-group-btn><button type=button class="btn btn-default" ng-click="abrirDate(\'desde\')"><i class="glyphicon glyphicon-calendar"></i></button></span></div></div></fieldset><fieldset class=form-group><label class="col-md-3 control-label">hasta</label><div class=col-md-6><div class=input-group><input class=form-control datepicker-popup={{date.format}} min-date=encuesta.desde ng-model=encuesta.hasta is-open=date.hasta datepicker-options=date.options ng-required=true show-weeks=false close-text="Cerrar"> <span class=input-group-btn><button type=button class="btn btn-default" ng-click="abrirDate(\'hasta\')"><i class="glyphicon glyphicon-calendar"></i></button></span></div></div></fieldset></div><div class=col-md-6><fieldset class=form-group><label class="col-md-6 control-label">Estado de Encuesta (*)</label><div class=col-md-6><select ng-model=encuesta.estado class=form-control required ng-options="estado for estado in estados"></select></div></fieldset><fieldset class=form-group><label class="col-md-6 control-label">Tipo de Equipo Asignado</label><div class=col-md-6><select ng-model=encuesta.equipo class=form-control required ng-options="equipo for equipo in equipos"></select></div></fieldset></div></div></form><div class=col-md-12>(*) campo obligatorio</div></div><div class=modal-footer><button class="btn btn-cuanto" ng-click=ejecutar(encuesta) ng-disabled=disableAgregar>{{btnActionLabel}}</button> <button class="btn btn-cuanto" ng-click=salir()>Salir</button></div>'),a.put("app/configuracion/parametros/parametros.html",'<div class="panel panel-cuanto"><div class="panel-heading text-center"><strong>Tabla de Parámetros</strong></div><div class=panel-body><alert type={{alert.type}} ng-if=alert.show close="alert.show=false">{{alert.message}}</alert><table class=table><thead><tr><th ng-repeat="header in tabla.headers" ng-class=header.class>{{header.title}}</th><th colspan=2 class=col-sm-1></th></tr></thead><tbody><tr dir-paginate="encuesta in encuestas | itemsPerPage: tabla.paginacion.numero" current-page=tabla.paginacion.actual pagination-id=encuestasPag><td>{{encuesta.codigo}}</td><td>{{encuesta.descripcion}}</td><td>{{encuesta.numero}}</td><td>{{encuesta.desde | date: \'dd-MM-yyyy\'}}</td><td>{{encuesta.hasta | date: \'dd-MM-yyyy\'}}</td><td>{{encuesta.estado}}</td><td><button class="btn btn-cuanto btn-sm" ng-click=modificar(encuesta)><i class="glyphicon glyphicon-pencil"></i></button></td><td><button class="btn btn-cuanto btn-sm" ng-click=eliminar(encuesta)><i class="glyphicon glyphicon-trash"></i></button></td></tr></tbody></table><div class="row text-center" ng-if="encuestas.length > 0"><dir-pagination-controls max-size=5 pagination-id=encuestasPag class=paginacion></dir-pagination-controls></div><button class="btn btn-cuanto" ng-click=agregar()>Agregar</button></div></div>'),a.put("app/configuracion/roles/modificar/modificar.html",'<div class="modal-header modal-header-cuanto">Modificar Rol</div><div class=modal-body><fieldset class=form-group><label class=control-label>Codigo</label><input class=form-control ng-model=rol.codigo placeholder=codigo required limit-to="3"></fieldset><fieldset class=form-group><label class=control-label>Descripcion</label><input class=form-control ng-model=rol.descripcion placeholder=descripcion required></fieldset></div><div class=modal-footer><button class="btn btn-cuanto" ng-click=modificar(rol)>Modificar</button> <button class="btn btn-cuanto" ng-click=salir()>Salir</button></div>'),a.put("app/configuracion/roles/roles.html",'<div class="col-md-offset-2 col-md-8"><div class="panel panel-cuanto"><div class=panel-heading>Tabla de Roles</div><div class=panel-body><alert type={{alert.type}} ng-if=alert.show close="alert.show=false">{{alert.message}}</alert><form ng-submit=agregar(rol) name=rolForm><fieldset class=form-group><label class=control-label>Codigo</label><input class=form-control ng-model=rol.codigo placeholder=codigo ng-maxlength=3 required></fieldset><fieldset class=form-group><label class=control-label>Descripcion</label><input class=form-control ng-model=rol.descripcion placeholder=descripcion required></fieldset><fieldset class=form-group><input type=submit class="btn btn-cuanto" value="Agregar"></fieldset></form><table class=table><thead><tr><th ng-repeat="header in tabla.headers" ng-class=header.class>{{header.title}}</th><th colspan=2 class=col-sm-1></th></tr></thead><tbody><tr ng-repeat="rol in roles"><td>{{rol.codigo}}</td><td>{{rol.descripcion}}</td><td><button class="btn btn-cuanto btn-sm" ng-if=!esProtegido(rol) ng-click=modificar(rol)><i class="glyphicon glyphicon-pencil"></i></button></td><td><button class="btn btn-cuanto btn-sm" ng-if=!esProtegido(rol) ng-click=eliminar(rol)><i class="glyphicon glyphicon-trash"></i></button></td></tr></tbody></table></div></div></div>'),a.put("app/configuracion/usuarios/agregar/agregar.html",'<div class="modal-header modal-header-cuanto">{{modificar ? \'Modificar\' : \'Agregar\'}} Usuario</div><div class=modal-body><alert type={{alert.type}} ng-if=alert.show close="alert.show=false">{{alert.message}}</alert><form class="row form-horizontal" name=usuarioForm novalidate><div class=col-md-6><fieldset class=form-group ng-disabled=true ng-if=modificar><label class="control-label col-md-4">Usuario</label><div class=col-md-8><input class=form-control placeholder=usuario ng-model="usuario.usuario"></div></fieldset><fieldset class=form-group><label class="control-label col-md-4">DNI Usuario(*)</label><div class=col-md-8><input only-digits ng-maxlength=8 ng-minlength=8 required limit-to=8 class=form-control placeholder=dni ng-model="usuario.dni"></div></fieldset><fieldset class=form-group><label class="control-label col-md-4">Apellido Paterno(*)</label><div class=col-md-8><input required class=form-control placeholder="apellido paterno" ng-model="usuario.apellidos.paterno"></div></fieldset><fieldset class=form-group><label class="control-label col-md-4">Apellido Materno*)</label><div class=col-md-8><input required class=form-control placeholder="apellido materno" ng-model="usuario.apellidos.materno"></div></fieldset><fieldset class=form-group><label class="control-label col-md-4">Nombres(*)</label><div class=col-md-8><input required class=form-control placeholder=nombres ng-change=asignarPass(usuario) ng-model="usuario.nombres"></div></fieldset><fieldset class=form-group ng-if="usuario.tipo==\'ENCUESTADOR\'"><label class="control-label col-md-4">Encuestas Encargadas</label><fieldset class=col-md-8><label class="control-label col-md-2"><small>Desde</small></label><div class=col-md-4><input type=number novalidate min=1 integer class=form-control ng-model="usuario.encuestas.desde"></div><label class="control-label col-md-2"><small>Hasta</small></label><div class=col-md-4><input type=number novalidate integer class=form-control ng-model="usuario.encuestas.hasta"></div></fieldset></fieldset><fieldset class=form-group ng-hide=disabled ng-if=!esAdministrador(usuario)><label class="control-label col-md-4">Zonificación(*)</label><fieldset class=col-md-8><fieldset class=form-group><label class="control-label col-md-5">Departamento</label><div class=col-md-7><select class=form-control ng-model=usuario.zonificacion.departamento ng-required=!esAdministrador(usuario) ng-change=elegirDepartamento(usuario.zonificacion.departamento) ng-options="dep for dep in form.zonificacion.departamentos"></select></div></fieldset><fieldset class=form-group><label class="control-label col-md-5">Provincia</label><div class=col-md-7><select class=form-control ng-model=usuario.zonificacion.provincia ng-required=!esAdministrador(usuario) ng-change="elegirProvincia(usuario.zonificacion.departamento, usuario.zonificacion.provincia)" ng-options="dep for dep in form.zonificacion.provincias"></select></div></fieldset><fieldset class=form-group><label class="control-label col-md-5">Distrito</label><div class=col-md-7><select class=form-control ng-model=usuario.zonificacion.distrito ng-required=!esAdministrador(usuario) ng-change=elegirDistrito() ng-options="dep for dep in form.zonificacion.distritos"></select></div></fieldset></fieldset></fieldset><fieldset class=form-group ng-show=disabled&&!esAdministrador(usuario) ng-disabled=true><label class="control-label col-md-4">Zonificación(*)</label><fieldset class=col-md-8><fieldset class=form-group><label class="control-label col-md-5">Departamento</label><div class=col-md-7><input class=form-control ng-model="usuario.zonificacion.departamento"></div></fieldset><fieldset class=form-group><label class="control-label col-md-5">Provincia</label><div class=col-md-7><input class=form-control ng-model="usuario.zonificacion.provincia"></div></fieldset><fieldset class=form-group><label class="control-label col-md-5">Distrito</label><div class=col-md-7><input class=form-control ng-model="usuario.zonificacion.distrito"></div></fieldset></fieldset></fieldset></div><div class=col-md-6><fieldset class=form-group ng-disabled=modificar><label class="control-label col-md-4">Tipo Usuario(*)</label><div class=col-md-8><select class=form-control ng-model=usuario.tipo required ng-options="tipo for tipo in form.usuario.tipos"></select></div></fieldset><fieldset class=form-group ng-if=!esAdministrador(usuario)><label class="control-label col-md-4">Grupo Usuario(*)</label><div class=col-md-8><input type=number min=0 integer ng-required="usuario.tipo!=\'ADMINISTRADOR\'" class=form-control placeholder=grupo ng-model="usuario.grupo"></div></fieldset><fieldset class=form-group ng-if=!esAdministrador(usuario)><label class="control-label col-md-4">Equipo Asignado(*)</label><div class=col-md-8><select class=form-control ng-model=usuario.equipo.tipo required ng-options="equipo for equipo in form.equipos"></select></div></fieldset><fieldset class=form-group ng-if=!esAdministrador(usuario)><label class="control-label col-md-4">Marca(*)</label><div class=col-md-8><input class=form-control placeholder=marca required ng-model="usuario.equipo.marca"></div></fieldset><fieldset class=form-group ng-if=!esAdministrador(usuario)><label class="control-label col-md-4">Nro de Serie(*)</label><div class=col-md-8><input class=form-control required placeholder="nro serie" ng-model="usuario.equipo.serie"></div></fieldset><fieldset class=form-group><label class="control-label col-md-4">Contraseña(*)</label><div class=col-md-8><input type=password ng-if=!visualizar class=form-control ng-disabled=true placeholder=contraseña ng-model="usuario.clave"> <input ng-if=visualizar class=form-control ng-disabled=true placeholder=contraseña ng-model="usuario.clave"> <span class=help-block><button class="btn btn-default btn-cuanto-default pull-right" ng-click="visualizar=!visualizar">visualizar</button></span></div></fieldset></div></form></div><div class=modal-footer><button class="btn btn-cuanto" ng-click=ejecutar(usuarioForm,usuario)>{{btnActionLabel}}</button> <button class="btn btn-cuanto" ng-click=salir()>Salir</button></div>'),a.put("app/configuracion/usuarios/excel/excel.html",'<div class="modal-header modal-header-cuanto">Importar data masiva</div><div class=modal-body><alert ng-repeat="alert in alerts" type={{alert.type}} ng-if=alert.show close="alert.show=false">{{alert.message}}</alert><div class=form-group><span class="btn btn-cuanto btn-file">elegir archivo <input type=file name=excel_file accept=.xlsx onchange=angular.element(this).scope().fileChanged(this.files) required></span></div><table class=table><thead><tr><th ng-repeat="header in tabla.headers" ng-class=header.class>{{header.title}}</th><th>Clave</th></tr></thead><tbody><tr ng-repeat="usuario in usuarios"><td>{{usuario.dni}}</td><td>{{usuario.apellidos.paterno}} {{usuario.apellidos.materno}}</td><td>{{usuario.nombres}}</td><td>{{usuario.tipo}}</td><td>{{usuario.grupo}}</td><td>{{usuario.zonificacion.departamento}}-{{usuario.zonificacion.provincia}}-{{usuario.zonificacion.distrito}}</td><td>{{usuario.clave}}</td></tr></tbody></table></div><!--<pre>{{usuarios|json}}</pre>--><div class=modal-footer><button class="btn btn-cuanto" ng-click=aceptar() ng-disabled=!usuarios>Aceptar</button> <button class="btn btn-cuanto" ng-click=salir()>Salir</button></div>'),a.put("app/configuracion/usuarios/resumen/resumen.html",'<table class=table print-table print-only><thead><tr><th ng-repeat="header in tabla.headers" ng-class=header.class>{{header.title}}</th></tr></thead><tbody><tr ng-repeat="usuario in usuarios"><td>{{usuario.grupo}}</td><td>{{usuario.supervisor.nombreCompleto}}</td><td>{{usuario.nombreCompleto}}</td><td>{{usuario.encuestas.desde}}</td><td>{{usuario.encuestas.hasta}}</td></tr></tbody></table><div class="modal-header modal-header-cuanto">Resumen de Usuarios</div><div class="modal-body clearfix"><alert type={{alert.type}} ng-if=alert.show close="alert.show=false">{{alert.message}}</alert><form name=form novalidate><table class=table><thead><tr><th ng-repeat="header in tabla.headers" ng-class=header.class>{{header.title}}</th></tr></thead><tbody><tr ng-repeat="usuario in usuarios"><td>{{usuario.grupo}}</td><td>{{usuario.supervisor.nombreCompleto}}</td><td>{{usuario.nombreCompleto}}</td><td><input type=number class=form-control ng-model=usuario.encuestas.desde required min=1 ng-disabled="true"></td><td><input type=number class=form-control ng-model=usuario.encuestas.hasta required min=1 ng-disabled="true"></td></tr></tbody></table><div class=pull-right><button class="btn btn-cuanto" ng-click=imprimir()><i class="glyphicon glyphicon-print"></i></button> <button class="btn btn-cuanto" ng-disabled=!numeracion ng-click=guardar()>Guardar</button> <button class="btn btn-cuanto" ng-click=numerar()>Numerar Encuesta</button> <button class="btn btn-cuanto" ng-click=salir()>Salir</button></div></form></div>'),a.put("app/configuracion/usuarios/usuarios.html",'<div class="col-md-offset-3 col-md-6" ng-show=!encuestaId><div class="panel panel-cuanto"><div class=panel-heading>Configuracion Encuesta</div><div class=panel-body><fieldset class=form-group><label for=encuesta>Código de Encuesta:</label><select ng-model=encuesta id=encuesta class=form-control required ng-options="encuesta.codigo for encuesta in encuestas"></select></fieldset><fieldset class=form-group><label for=descripcion>Descripción(*)</label><textarea id=descripcion type=text rows=3 class=form-control ng-model=encuesta.descripcion ng-disabled=true></textarea></fieldset><fieldset class=form-group><button class="btn btn-cuanto" type=submit ng-click=elegirEncuesta(encuesta.codigo)>Aceptar</button></fieldset></div></div></div><div ng-show=encuestaId><div class="panel panel-cuanto"><div class="panel-heading text-center"><strong>Tabla de Usuarios - Encuesta: {{encuestaId}}</strong></div><div class=panel-body><alert type={{alert.type}} ng-if=alert.show close="alert.show=false">{{alert.message}}</alert><table class=table export-table id=usuarios archivo=usuarios sheet=usuarios print-section print-if=imprimirUsuarios ng-if=!imprimirResumen><thead><tr><td class=theader ng-repeat="header in tabla.headers" ng-class=header.class>{{header.title}}</td><th print-hide></th><th print-hide></th></tr></thead><tbody><tr ng-repeat="usuario in usuarios"><td>{{usuario.usuario}}</td><td>{{usuario.dni}}</td><td>{{usuario.apellidos.paterno}} {{usuario.apellidos.materno}}</td><td>{{usuario.nombres}}</td><td>{{usuario.tipo}}</td><td>{{usuario.grupo}}</td><td>{{usuario.encuestas.desde}}</td><td>{{usuario.encuestas.hasta}}</td><td>{{usuario.zonificacion.ubigeo}}</td><td print-hide><button class="btn btn-cuanto btn-sm" ng-click=modificar(usuario) ng-show=isAdministrador()><i class="glyphicon glyphicon-pencil"></i></button></td><td print-hide><button class="btn btn-cuanto btn-sm" ng-click=eliminar(usuario) ng-show=isAdministrador()><i class="glyphicon glyphicon-trash"></i></button></td></tr></tbody></table><table class=table print-section print-only print-if=imprimirResumen><thead><tr><th ng-repeat="header in tabla.headersResumen" ng-class=header.class>{{header.title}}</th></tr></thead><tbody><tr ng-repeat="usuario in usuariosResumen"><td>{{usuario.grupo}}</td><td>{{usuario.supervisor.nombreCompleto}}</td><td>{{usuario.nombreCompleto}}</td><td>{{usuario.encuestas.desde}}</td><td>{{usuario.encuestas.hasta}}</td></tr></tbody></table></div><div class=panel-footer><button class="btn btn-cuanto" ng-click=agregar()>Agregar</button> <button class="btn btn-cuanto" ng-click=imprimir()><i class="glyphicon glyphicon-print"></i></button> <button class="btn btn-cuanto" ng-click=importar()>Importar Data</button> <button class="btn btn-cuanto" ng-click=exportar()>Exportar</button> <button class="btn btn-cuanto" ng-click=resumen()>Resumen</button> <button class="btn btn-cuanto" ng-click=salir()>Salir</button></div></div></div>'),a.put("app/control/consultar/consultar.html",'<div print-section print-only print-if=imprimirResumen><div class=text-center><h4>Encuesta {{encuesta.codigo}}</h4><p>{{encuesta.descripcion}}</p></div><div class="panel panel-cuanto" ng-repeat="encuesta in resumen"><div class=panel-heading><span class=bold>Supervisor:</span>{{encuesta.supervisor.nombreCompleto}}</div><table class=table><thead><tr><th ng-repeat="header in tabla.headersResumen" ng-class=header.class>{{header.title}}</th></tr></thead><tbody><tr ng-repeat="encuestador in encuesta.encuestadores"><td>{{encuestador.nombreCompleto}}</td><td class=text-center>{{encuestador.encuestas.terminadas}}</td><td class=text-center>{{encuestador.encuestas.porcentaje}}</td><td class=text-center>{{encuestador.encuestas.transferidas}}</td><td class=text-center>{{encuestador.encuestas.porTransferir}}</td></tr></tbody></table></div></div><div class="panel panel-cuanto" ng-if=!imprimirResumen><div class=panel-heading>Consulta de Encuestas</div><div class=panel-body><alert type={{alert.type}} ng-if=alert.show close="alert.show=false">{{alert.message}}</alert><form class="col-md-offset-3 col-md-6" ng-if=!mostrarResultados name=form novalidate><fieldset class=form-group><label>Codigo de Encuesta</label><select ng-model=form.encuesta class=form-control ng-required=true ng-change=elegirEncuesta(form.encuesta) ng-options="encuesta.codigo for encuesta in encuestas"></select></fieldset><fieldset class=form-group><label>Nombre de Supervisor</label><select ng-model=form.supervisor class=form-control ng-options="supervisor.nombreCompleto for supervisor in supervisores"><option value="">todos</option></select></fieldset><fieldset class=form-group><label>Nombre de Usuario</label><select ng-model=form.encuestador class=form-control ng-options="usuario.nombreCompleto for usuario in usuarios"><option value="">todos</option></select></fieldset><fieldset class=form-group><button class="btn btn-cuanto" ng-click=buscar(form)>Aceptar</button></fieldset></form><div ng-if=mostrarResultados><div class=text-center><h4>Encuesta {{encuesta.codigo}}</h4><p>{{encuesta.descripcion}}</p></div><fieldset class="form-group clearfix"><div class=col-xs-3><select ng-options="categoria for categoria in categorias" class=form-control ng-model=categoria><option value="">elige una categoria</option></select></div><button class="btn btn-cuanto" ng-disabled=!categoria ng-click=exportarExtra(categoria)>Reporte</button><div class=pull-right><button class="btn btn-cuanto" ng-click=resumen()>Resumen</button> <button class="btn btn-cuanto" ng-click=salir()>Salir</button></div></fieldset><table class=table ng-if=!imprimirResumen><thead><tr><td class=theader ng-repeat="header in tabla.headers" ng-class=header.class>{{header.title}}</td></tr></thead><tbody><tr ng-repeat="resultado in encuesta.resultados"><td>{{resultado.encuestador.nombreCompleto}}</td><td class=text-center>{{resultado.numeroEncuesta}}</td><td>{{resultado.encuestado}}</td><td>{{resultado.fecha | date: \'dd-MM-yyyy\'}}</td><td class=text-center>{{resultado.hora.inicio}}</td><td class=text-center>{{resultado.hora.fin}}</td><td>{{resultado.hora.tiempo}}</td><td>{{resultado.estado}}</td></tr></tbody></table><!--tabla reporte diccionario--><table id=reporte-diccionario ng-show=false><thead><tr><td>VARIABLE</td><td>DESCRIPCION</td></tr></thead><tbody><tr ng-repeat="valor in diccionario"><td>{{valor.variable}}</td><td>{{valor.descripcion}}</td></tr></tbody></table><!--tabla reporte base --><table id=reporte-base ng-show=false><thead><tr><td ng-repeat="h in reporteBaseHeaders">{{h}}</td></tr></thead><tbody><tr ng-repeat="persona in respuestas"><td ng-repeat="(key, value) in persona">{{value}}</td></tr></tbody></table></div></div></div><span us-spinner spinner-key=spinner spinner-theme=bigRed></span>'),a.put("app/control/consultar/resumen/resumen.html",'<div class="modal-header modal-header-cuanto">Resumen General de Encuestas</div><div class="modal-body clearfix"><div class=text-center><h4>Codigo de Encuesta: {{encuesta.codigo}}</h4><p>{{encuesta.descripcion}}</p></div><p><button class="btn btn-cuanto" ng-click=imprimir()><i class="glyphicon glyphicon-print"></i></button></p><div class="panel panel-cuanto" ng-repeat="encuesta in resumen"><div class=panel-heading>{{encuesta.supervisor.nombreCompleto}}</div><table class=table><thead><tr><th ng-repeat="header in tabla.headers" ng-class=header.class>{{header.title}}</th></tr></thead><tbody><tr ng-repeat="encuestador in encuesta.encuestadores"><td>{{encuestador.nombreCompleto}}</td><td class=text-center>{{encuestador.encuestas.terminadas}}</td><td class=text-center>{{encuestador.encuestas.porcentaje}}</td><td class=text-center>{{encuestador.encuestas.transferidas}}</td><td class=text-center>{{encuestador.encuestas.porTransferir}}</td></tr></tbody></table></div></div><div class=modal-footer><button class="btn btn-cuanto" ng-click=imprimir()><i class="glyphicon glyphicon-print"></i></button> <button class="btn btn-cuanto" ng-click=salir()>Salir</button></div>'),a.put("app/control/control.html",'<div class=container ui-view=""></div>'),a.put("app/main/main.html",'<div class=container><div class="col-md-offset-6 col-md-6"><div class="panel panel-cuanto"><div class=panel-heading><strong>Acceso al sistema</strong></div><div class=panel-body><div><alert type={{alert.type}} ng-if=alert.show close="alert.show=false">{{alert.message}}</alert><form ng-submit=ingresar(usuario)><fieldset class=form-group><input id=username class=form-control ng-model=usuario.usuario required oninvalid="this.setCustomValidity(\'ingresa tu usuario\')" placeholder="usuario"></fieldset><fieldset class=form-group><input id=password type=password class=form-control required ng-model=usuario.clave oninvalid="this.setCustomValidity(\'ingresa tu contraseña\')" placeholder="contraseña"></fieldset><button class="btn btn-cuanto pull-right" type=submit>Ingresar</button></form></div></div></div></div></div>'),a.put("components/modal/modal.html",'<div class="modal-header modal-header-cuanto"><button ng-if=modal.dismissable type=button ng-click=$dismiss() class=close>&times;</button><h4 ng-if=modal.title ng-bind=modal.title class=modal-title></h4></div><div class=modal-body><p ng-if=modal.text ng-bind=modal.text></p><div ng-if=modal.html ng-bind-html=modal.html></div></div><div class=modal-footer><button ng-repeat="button in modal.buttons" ng-class=button.classes ng-click=button.click($event) ng-bind=button.text class=btn></button></div>'),a.put("components/navbar/navbar.html",'<div class="navbar navbar-default navbar-static-top" ng-controller=NavbarCtrl><div class=container><div class=navbar-header><button class=navbar-toggle type=button ng-click="isCollapsed = !isCollapsed"><span class=sr-only>Toggle navigation</span> <span class=icon-bar></span> <span class=icon-bar></span> <span class=icon-bar></span></button> <a class=navbar-brand>sisgene</a></div><div collapse=isCollapsed class="navbar-collapse collapse" id=navbar-main><ul class="nav navbar-nav"><li dropdown ng-class="{active: isActive(configuracion)}" ng-if=usuario><a href="" dropdown-toggle>{{configuracion.title}} {{configuracion.sub}}</a><ul class=dropdown-menu role=menu><li role=menuitem ng-repeat="sub in configuracion.dropdown" ng-show=sub.show()><a href="" ng-click="elegirSub(sub.title, configuracion);ir(sub.state)">{{sub.title}}</a></li></ul></li><li dropdown ng-class="{active: isActive(control)}" ng-if=usuario&&isAdministrador><a href="" dropdown-toggle>{{control.title}} {{control.sub}}</a><ul class=dropdown-menu role=menu><li role=menuitem ng-repeat="sub in control.dropdown"><a href="" ng-click="elegirSub(sub.title, control);ir(sub.state)">{{sub.title}}</a></li></ul></li></ul><ul class="nav navbar-nav navbar-right"><li ng-if=usuario><p class=navbar-text>{{usuario.nombre}} <i class="glyphicon glyphicon-user"></i></p></li><li ng-if=usuario><a href="" ng-click=logout()>cerrar sesión <i class="glyphicon glyphicon-log-out"></i></a></li></ul></div></div></div>')}]);